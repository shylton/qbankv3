function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode&&e.parentNode.removeChild(e)}function l(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function u(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function d(e){return document.createTextNode(e)}function p(){return d(" ")}function m(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function f(e){return function(t){return t.preventDefault(),e.call(this,t)}}function g(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.data!==t&&(e.data=t)}function v(e,t){e.value=t??""}function w(e,t,n,i){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function b(e,t,n){e.classList[n?"add":"remove"](t)}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class A{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=u(t.nodeName):this.e=h(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)a(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(c)}}let E;function k(e){E=e}function T(){if(!E)throw new Error("Function called outside component initialization");return E}function S(e){T().$$.on_destroy.push(e)}function C(){const e=T();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=function(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}(t,n,{cancelable:i});return r.slice().forEach((t=>{t.call(e,s)})),!s.defaultPrevented}return!0}}function _(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const I=[],D=[];let x=[];const P=[],N=Promise.resolve();let R=!1;function O(e){x.push(e)}const M=new Set;let L=0;function F(){if(0!==L)return;const e=E;do{try{for(;L<I.length;){const e=I[L];L++,k(e),j(e.$$)}}catch(e){throw I.length=0,L=0,e}for(k(null),I.length=0,L=0;D.length;)D.pop()();for(let e=0;e<x.length;e+=1){const t=x[e];M.has(t)||(M.add(t),t())}x.length=0}while(I.length);for(;P.length;)P.pop()();R=!1,M.clear(),k(e)}function j(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(O)}}const V=new Set;let B;function U(e,t){e&&e.i&&(V.delete(e),e.i(t))}function $(e,t,n,i){if(e&&e.o){if(V.has(e))return;V.add(e),B.c.push((()=>{V.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}function G(e){e&&e.c()}function z(e,n,s,o){const{fragment:a,after_update:c}=e.$$;a&&a.m(n,s),o||O((()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):i(n),e.$$.on_mount=[]})),c.forEach(O)}function H(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];x.forEach((i=>-1===e.indexOf(i)?t.push(i):n.push(i))),n.forEach((e=>e())),x=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function q(e,t){-1===e.$$.dirty[0]&&(I.push(e),R||(R=!0,N.then(F)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function W(t,r,s,o,a,l,h,u=[-1]){const d=E;k(t);const p=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||d.$$.root};h&&h(p.root);let m=!1;if(p.ctx=s?s(t,r.props||{},((e,n,...i)=>{const r=i.length?i[0]:n;return p.ctx&&a(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),m&&q(t,e)),n})):[],p.update(),m=!0,i(p.before_update),p.fragment=!!o&&o(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(c)}else p.fragment&&p.fragment.c();r.intro&&U(t.$$.fragment),z(t,r.target,r.anchor,r.customElement),F()}k(d)}class K{$destroy(){H(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const e=i.indexOf(n);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Q=[{prompt:"A 49-year-old male presents with recurrent purulent otorrhea and hearing loss. On exam there is retraction of the tympanic membrane with debris and a white mass visible behind the tympanic membrane. What is the most likely diagnosis?",answers:["Acoustic neuroma","Cholesteatoma","Mastoiditis","Tympanosclerosis"],correct:1,userChoice:-1,source:"https://www.enthealth.org/conditions/cholesteatoma/",rationale:"Cholesteatoma is the presence of a white mass behind the tympanic membrane (the middle ear). May be asymptomatic or include recurrent purulent otorrhea. If left untreated it can cause chronic inflammation and erosion of bone and the ossicles, and hearing loss.<br>Acoustic neuroma typically presents with unilateral hearing loss and tinnitus but not with purulent otorrhea.<br>Mastoiditis with postauricular pain, swelling, and erythema.<br>Tympanosclerosis the formation of scar tissue on the tympanic membrane, which can lead to hearing loss.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Head_Eyes&ENT","Pharmacology?":"FALSE"},{prompt:"A 6-year-old girl presents with multiple small, firm, dome-shaped bumps with central umbilication on her trunk and extremities. She reports mild itching but no pain. The lesions have been slowly increasing in number over the past few weeks. What is the most likely diagnosis?",answers:["Chickenpox","Molluscum contagiosum","Warts","Impetigo"],correct:1,userChoice:-1,source:"https://www.cdc.gov/poxvirus/molluscum-contagiosum/index.html",rationale:"Molluscum contagiosum is characterized by multiple small, flesh-colored, dome-shaped papules with central umbilication. It is a viral infection caused by the molluscum contagiosum virus (MCV), which is part of the poxvirus family. The presence of central umbilication and the described appearance help differentiate it from other conditions like chickenpox, which typically presents with more widespread, vesicular lesions; warts, which are usually rough and raised without central umbilication; and impetigo, which often presents with honey-colored crusts.",bookmarked:0,Domain:"Diagnose","Age Group":"Child (6-12)",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"A patient presents with symptoms of a persistent cough, night sweats, and unexplained weight loss. The nurse suspects active tuberculosis. Which diagnostic test is most definitive for confirming it?",answers:["Chest X-ray","Tuberculin skin test","Sputum cultures","Complete blood count (CBC)"],correct:2,userChoice:-1,source:"https://www.cdc.gov/tb/hcp/testing-diagnosis/clinical-and-laboratory-diagnosis.html",rationale:"While a chest X-ray can show signs suggestive of tuberculosis and the tuberculin skin test can indicate exposure to TB, the most definitive test for diagnosing <b>active</b> tuberculosis is the examination of sputum cultures because they confirm the presence of Mycobacterium tuberculosis bacteria, which is essential for a definitive diagnosis of active TB. A CBC is not specific for diagnosing tuberculosis.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Respiratory","Pharmacology?":"FALSE"},{prompt:"The NP should prefer _____ to treat hypertension in postmenopausal women since it may also delay cortical bone loss.",answers:["Thiazides","Calcium channel blockers","ACE Inhibitors","ARBs"],correct:0,userChoice:-1,source:"https://pubmed.ncbi.nlm.nih.gov/11020392/",rationale:"Thiazide diuretics are recommended for treating hypertension in postmenopausal women partly because they have been shown to decrease urinary calcium excretion, which may help delay cortical bone loss. This makes thiazides a beneficial choice not only for controlling blood pressure but also for potentially reducing the risk of osteoporosis in this patient group. The other listed antihypertensives do not offer the same benefit in terms of bone density preservation.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Cardiovascular","Pharmacology?":"TRUE"},{prompt:"A 72-year-old patient diagnosed with COPD is currently on a long acting beta agonist (LABA) with minimal symptoms relief. You recognize the need to step up in his treatment, what would you prescribe next?",answers:["Short acting beta agonist (SABA)","Glucocorticoid","Low dose inhaled corticosteroid  (ICS)","Long acting muscarinic antagonist (LAMA)"],correct:3,userChoice:-1,source:"https://www.asthma-breathe.com/clinical-care-toolkit/current-guideline-for-asthma/",rationale:"The patient should already be on a SABA. If LABA is not enough, the next drug of choice is LAMA and ICS comes after.",bookmarked:0,Domain:"Implement","Age Group":"Elderly (65+)",Subject:"Respiratory","Pharmacology?":"TRUE"},{prompt:"A 12-year-old boy presents with chronic right hip pain and a resultant limp, without any preceding injury. On physical examination, he exhibits painful and restricted internal rotation of the right hip. X-ray findings reveal physis widening and displacement of the femoral head. What is the most likely diagnosis?",answers:["Developmental hip dysplasia","Legg-Calve-Perthes disease","Transient synovitis","Slipped capital femoral epiphysis (SCFE)"],correct:3,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5421350",rationale:"The most likely diagnosis for this 12-year-old boy is Slipped Capital Femoral Epiphysis (SCFE), common in adolescents. It is characterized by a displacement of the femoral head at the growth plate, typically presenting with hip or groin pain and a limp. The X-ray showing widening of the physis and displacement of the femoral head confirms SCFE. Limited hip movement and pain also support this diagnosis. Immediate surgical intervention is needed to stabilize the hip and prevent complications.",bookmarked:0,Domain:"Diagnose","Age Group":"Child (6-12)",Subject:"Musculoskeletal","Pharmacology?":"FALSE"},{prompt:"Which cranial nerve is associated with hearing?",answers:["Facial (VII)","Trigeminal (V)","Vestibulocochlear (VIII)","Oculomotor (III)"],correct:2,userChoice:-1,source:"https://training.seer.cancer.gov/brain/tumors/anatomy/nerves.html",rationale:"Vestibulocochlear VIII is associated with hearing, hence the name “cochlea” which is a part inside the ear.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult and Elderly",Subject:"Neurological","Pharmacology?":"FALSE"},{prompt:"NSAIDs may ____ the effects of thiazides, making blood pressure management ____ effective.",answers:["enhance, less","inhibit, less","enhance, more","inhibit, more"],correct:1,userChoice:-1,source:"https://www.amjmed.com/article/0002-9343(91)90485-G/abstract",rationale:"NSAIDs can inhibit the blood pressure-lowering effects of diuretics by reducing the natriuretic and antihypertensive actionss. This interaction can lead to less effective blood pressure management in patients using both medications. Therefore, it is important to monitor blood pressure closely and consider alternative pain management strategies for those patients.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult and Elderly",Subject:"Cardiovascular","Pharmacology?":"TRUE"},{prompt:"Which organism is responsible for most urinary tract infections?",answers:["Staphylococcus aureus","Escherichia coli","Klebsiella pneumoniae","Pseudomonas aeruginosa"],correct:1,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4457377/",rationale:"Escherichia coli (E. coli) is the most common organism responsible for urinary tract infections (UTIs). It accounts for the majority of both uncomplicated and complicated UTI cases. Other organisms like Staphylococcus aureus, Klebsiella pneumoniae, and Pseudomonas aeruginosa can also cause UTIs but are less common.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Genitourinary&Renal","Pharmacology?":"FALSE"},{prompt:"A 22-year-old patient has been diagnosed with Chlamydia. What is the preferred treatment?",answers:["Amoxicillin","Doxycycline","Azithromycin","Ciprofloxacin"],correct:1,userChoice:-1,source:"https://www.cdc.gov/std/treatment-guidelines/chlamydia.htm",rationale:"The preferred treatment for Chlamydia, according to the CDC, is doxycycline. The recommended regimen is doxycycline 100 mg taken twice daily for 7 days. Azithromycin is an alternative treatment and is effective as well, typically given as a single 1-gram dose. Amoxicillin and ciprofloxacin are not recommended as first-line treatments for Chlamydia.",bookmarked:0,Domain:"Plan","Age Group":"Adult (19-26)",Subject:"Reproductive","Pharmacology?":"TRUE"},{prompt:"Which of the following is a positive sign of pregnancy?",answers:["Goodell’s sign.","Nausea and vomiting.","Positive Beta hCG.","Fetal heart tone auscultated by health provider."],correct:3,userChoice:-1,source:"https://my.clevelandclinic.org/health/diagnostics/23464-fetal-heart-rate-monitoring",rationale:"Fetal heart tone auscultated by a health provider is the only positive sign. Goodell's sign and positive hCG are probable, while nausea and vomiting are presumptive.",bookmarked:0,Domain:"Assess","Age Group":"Adult (19-26)",Subject:"Pregnancy","Pharmacology?":"FALSE"},{prompt:"A 45-year-old patient undergoes a diagnostic test for a specific disease. The test has a high sensitivity but low specificity. What does this imply about the test’s characteristics?",answers:["The test accurately identifies those without the disease.","The test accurately identifies those with the disease.","The test is likely to produce false negatives.","The test is unlikely to produce false positives."],correct:1,userChoice:-1,source:"https://en.wikipedia.org/wiki/Sensitivity_and_specificity",rationale:"Sensitivity refers to a test’s ability to correctly identify individuals who have the disease (true positives). A test with high sensitivity is effective at detecting the disease, meaning it minimizes false negatives. Low specificity indicates that the test may incorrectly identify individuals without the disease as positive (false positives), so it is not as effective at ruling out those who do not have the disease.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Not-Applicable","Pharmacology?":"FALSE"},{prompt:"A 65-year-old patient presents with a tremor that occurs primarily at rest and improves with intentional movement. What is the most likely diagnosis?",answers:["Essential tremor","Cerebellar tremor","Parkinson's disease tremor","Physiologic tremor"],correct:2,userChoice:-1,source:"https://www.parkinson.org/understanding-parkinsons/movement-symptoms/tremor",rationale:"The main difference between Parkinson’s tremor and most other types of tremor is that resting tremor is most common in Parkinson's disease (PD). Parkinson's tremor typically occurs when the muscles are at rest and decreases with voluntary movement. In contrast, essential tremor and other conditions are usually characterized by 'action tremor,' which tends to lessen at rest and increase during activities such as making a phone call or taking a drink. Cerebellar tremor is associated with coordination issues, and physiologic tremor is a normal, often imperceptible tremor that can be exacerbated by certain conditions.",bookmarked:0,Domain:"Diagnose","Age Group":"Elderly (65+)",Subject:"Neurological","Pharmacology?":"FALSE"},{prompt:"The family nurse practitioner is seeing a patient with gout. What patient education should she provide regarding his diet?",answers:["Eat more organ meats.","Take a Vitamin C supplement.","Eat anchovies daily.","Avoid cherries."],correct:1,userChoice:-1,source:"https://www.mayoclinic.org/healthy-lifestyle/nutrition-and-healthy-eating/in-depth/gout-diet/art-20048524",rationale:"Taking a Vitamin C supplement can help reduce uric acid levels, which may decrease the risk of gout attacks. Patients with gout should avoid foods high in purines, such as organ meats and anchovies, as these can increase uric acid levels. Cherries are beneficial for gout as they have been shown to reduce uric acid levels and lower the risk of gout attacks.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult and Elderly",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"A patient presents with joint pain, swelling, and stiffness that is worse in the morning and improves with movement. The nurse practitioner recognizes that ____ is the most likely condition.",answers:["Osteoarthritis","Rheumatoid arthritis","Osteoporosis","Systemic Lupus Erythematosus"],correct:1,userChoice:-1,source:"https://www.cdc.gov/arthritis/types/rheumatoid-arthritis.html",rationale:"Rheumatoid arthritis is characterized by joint pain, swelling, and stiffness, particularly in the morning or after periods of inactivity. These symptoms tend to improve with movement. Unlike osteoarthritis, which is due to wear and tear on the joints, rheumatoid arthritis is an autoimmune condition where the body's immune system attacks the joint lining.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult and Elderly",Subject:"Musculoskeletal","Pharmacology?":"FALSE"},{prompt:"What is erythema migrans?",answers:["A type of skin cancer","A common symptom of eczema","A red, expanding rash with a clear center","A viral infection causing widespread rash"],correct:2,userChoice:-1,source:"https://www.cdc.gov/lyme/signs_symptoms/rashes.html",rationale:"Erythema migrans is a red, expanding rash that often has a clear center, giving it a 'bull's-eye' appearance. It is commonly associated with Lyme disease and is a key early indicator of the infection.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"In which Tanner stage does the female develop thelarche?",answers:["I","II","III","IV"],correct:1,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/books/NBK470280",rationale:"II. During the Tanner stage (Pre-adolescent stage) the female patient will develop breast budding, also known as thelarche. In this stage they will also develop areolar hyperplasia.",bookmarked:0,Domain:"Plan","Age Group":"Adolescent (12-18)",Subject:"Reproductive","Pharmacology?":"FALSE"},{prompt:"A patient presents with complaints of unsteadiness and frequent falls. As part of the neurological examination, you perform the Romberg's test. The patient is asked to stand with feet together and eyes closed, and they begin to sway significantly and almost fall over. How do you interpret this result?",answers:["Sensory ataxia","Cerebellar ataxia","Vestibular dysfunction","Normal balance"],correct:0,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/books/NBK563187/",rationale:"A positive Romberg's test, where the patient sways significantly or falls when their eyes are closed, indicates sensory ataxia. This suggests a problem with proprioception or the body's ability to sense its position in space, often due to peripheral neuropathy or dorsal column dysfunction. Cerebellar ataxia usually presents with unsteadiness even with eyes open. Vestibular dysfunction might also cause unsteadiness, but it is less commonly isolated to a positive Romberg's test without other symptoms.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult and Elderly",Subject:"Neurological","Pharmacology?":"FALSE"},{prompt:"Choose the incorrect CAGE acronym definition.",answers:["C is for Cut down","A: annoyed","G: guilty","E: emotional"],correct:3,userChoice:-1,source:"https://jamanetwork.com/journals/jama/fullarticle/182810",rationale:"The incorrect letter is E as it stands for EARLY or morning EYE-opener, as in needing a drink early in the morning.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Gastrointestinal","Pharmacology?":"FALSE"},{prompt:"_____ is when someone tries to get attention and sympathy by falsifying an illness.",answers:["Munchausen syndrome","Hypochondriasis","Conversion disorder","Somatization disorder"],correct:0,userChoice:-1,source:"https://my.clevelandclinic.org/health/diseases/9833-munchausen-syndrome-factitious-disorder-imposed-on-self",rationale:"Munchausen syndrome, now often referred to as Factitious Disorder Imposed on Self, involves a person repeatedly acting as if they have a physical or mental disorder when they are not really sick. This behavior is done to gain attention or sympathy from others. The other conditions listed involve psychological manifestations of distress, but do not involve deliberately faking illness for attention.",bookmarked:0,Domain:"Plan","Age Group":"Adult (19-26)",Subject:"Psychiatric","Pharmacology?":"FALSE"},{prompt:"What should the nurse practitioner prescribe to relieve the pain of a patient suffering from trigeminal neuralgia?",answers:["Carbamazepine (Tegretol)","Gabapentin (Neuraptine)","Amitriptyline","Desipramine (Norpramin)"],correct:0,userChoice:-1,source:"https://www.mayoclinic.org/drugs-supplements/carbamazepine-oral-route/side-effects/drg-20062739",rationale:"Trigeminal neuralgia, is effectively treated with anticonvulsants such as carbamazepine (Tegretol), since it reduces the nerve activity that causes the severe facial pain. Gabapentin may be used as a second-line treatment, while amitriptyline and desipramine are typically used for other types of neuropathic pain but are not the first choice for trigeminal neuralgia.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult and Elderly",Subject:"Neurological","Pharmacology?":"TRUE"},{prompt:"The family nurse practitioner counsels a patient with gout to avoid taking _____ for his high blood pressure as it can increase uric acid levels.",answers:["Amlodipine","Losartan","Hydrochlorothiazide","Lisinopril"],correct:2,userChoice:-1,source:"https://www.aafp.org/pubs/afp/issues/2015/1001/p622.html",rationale:"Hydrochlorothiazide, a thiazide diuretic, should be avoided in patients with gout as it can increase uric acid levels, potentially worsening the condition. Other antihypertensive medications like amlodipine, losartan, and lisinopril do not have the same effect on uric acid levels and are safer options for patients with gout.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult and Elderly",Subject:"Musculoskeletal","Pharmacology?":"TRUE"},{prompt:"Which of the following exam findings matches the condition?",answers:["Allen test to meniscal tear","McBurney’s point to cholecystitis","McMurray test to appendicitis","Rovsing sign to appendicitis "],correct:3,userChoice:-1,source:"https://www.sciencedirect.com/topics/medicine-and-dentistry/rovsings-sign",rationale:"A positive Rovsing sign, pain in the RLQ on palpation of the LLQ, is a sign of appendicitis as well as tenderness over McBurney’s point. The McMurray test helps identify meniscal tears of the knee. Allen’s test is used to evaluate arterial blood flow of the hand.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Not-Applicable","Pharmacology?":"FALSE"},{prompt:"Which of the following is a risk factor for colon cancer in an elderly patient?",answers:["Iron deficiency anemia","Changes in bowel habits","Age","Unexplained weight loss"],correct:2,userChoice:-1,source:"https://www.cancer.org/cancer/types/colon-rectal-cancer/causes-risks-prevention/risk-factors.html",rationale:"Advanced age is a significant risk factor for colon cancer. The risk of developing colon cancer increases as a person gets older. The other options are possible symptons rather than risk factors.",bookmarked:0,Domain:"Plan","Age Group":"Elderly (65+)",Subject:"Gastrointestinal","Pharmacology?":"FALSE"},{prompt:"A patient presents with red, swollen eyelids and complains of a gritty sensation in the eyes, along with crusting at the base of the eyelashes, particularly in the morning. The patient also reports frequent episodes of dry eyes and itching. Based on these symptoms, what is the most likely diagnosis?",answers:["Conjunctivitis","Blepharitis","Glaucoma","Uveitis"],correct:1,userChoice:-1,source:"https://www.aao.org/eye-health/diseases/what-is-blepharitis",rationale:"Blepharitis is characterized by inflammation of the eyelids, leading to symptoms such as red, swollen eyelids, a gritty sensation in the eyes, crusting at the base of the eyelashes, dry eyes, and itching. These symptoms are distinct from conjunctivitis, which typically involves conjunctival redness and discharge, glaucoma, which involves increased intraocular pressure and vision changes, and uveitis, which involves inflammation of the uvea and can cause eye pain, redness, and vision changes.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult and Elderly",Subject:"Head_Eyes&ENT","Pharmacology?":"FALSE"},{prompt:"The leading cause of Community Aquired Pneumonia is?",answers:["Mycoplasma pneumoniae","Haemophilus influenzae","Moraxella catarrhalis","Streptococcus pneumoniae"],correct:3,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7147208/",rationale:"Streptococcus pneumoniae is the leading cause of CAP. Other common bacterial causes include Haemophilus influenzae as well as atypical bacteria (Mycoplasma pneumoniae, Chlamydia pneumoniae, and Legionella species. Community-acquired pneumonia (CAP) is the sixth most common cause of death in the United States and the leading cause of death from infectious diseases. It is associated with significant morbidity and mortality and poses a major economic burden to the healthcare system.",bookmarked:0,Domain:"Assess","Age Group":"Elderly (65+)",Subject:"Respiratory","Pharmacology?":"FALSE"},{prompt:"A 22-year-old woman presents with an absence of menstrual periods for the past six months after previously having regular cycles. Which of the following should be the initial step to diagnose the cause of her secondary amenorrhea?",answers:["Pelvic ultrasound","Thyroid function tests","Pregnancy test","Prolactin level"],correct:2,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/amenorrhea/symptoms-causes/syc-20369299",rationale:"The initial step in diagnosing secondary amenorrhea should be a pregnancy test, as this is the most common cause of amenorrhea in reproductive-age women. Further testing, like thyroid function tests, prolactin levels, or a pelvic ultrasound, may be needed based on the results of the pregnancy test and other clinical findings.",bookmarked:0,Domain:"Diagnose","Age Group":"Adult (19-26)",Subject:"Reproductive","Pharmacology?":"FALSE"},{prompt:"Which sign and diagnostic test should you use to assess a patient for cholecystitis?",answers:["McMurray and CT","Murphy and US","McBurney’s and US","McFadden and CT"],correct:1,userChoice:-1,source:"https://www.clinicaleducation.org/wp-content/uploads/MurphysTest.pdf",rationale:"Murphy sign, which involves the patient experiencing pain upon palpation of the right upper quadrant during inspiration, is used to assess for cholecystitis because it indicates pain and tenderness in the gallbladder area, suggesting inflammation of the gallbladder. An abdominal ultrasound is the preferred initial imaging test to assess for cholecystitis, as it can effectively identify gallstones, gallbladder wall thickening, and other signs of inflammation. McMurray test is for meniscal tear, McFadden does not exist.",bookmarked:0,Domain:"Assess","Age Group":"Older Adult (26-65)",Subject:"Gastrointestinal","Pharmacology?":"FALSE"},{prompt:"A patient experiences pain with both the psoas and obturator signs. What diagnosis should the nurse practitioner suspect?",answers:["Nephrolithiasis","Cholecystitis","Appendicitis","Pancreatitis"],correct:2,userChoice:-1,source:"https://www.aafp.org/pubs/afp/issues/2018/0701/p25.html",rationale:"Pain elicited by both the psoas and obturator signs is indicative of irritation in the lower abdomen, commonly associated with appendicitis.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult and Elderly",Subject:"Musculoskeletal","Pharmacology?":"FALSE"},{prompt:"A 28-year-old woman who is 24 weeks pregnant presents to your clinic with complaints of headaches and swelling in her hands and feet. Her blood pressure is measured at 150/95 mmHg. Laboratory test results show proteinuria with a protein/creatinine ratio of 0.35 and elevated serum creatinine levels. Which of the following is the most likely diagnosis?",answers:["Preeclampsia","Chronic hypertension","Gestational hypertension","Eclampsia"],correct:0,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/preeclampsia/diagnosis-treatment/drc-20355751",rationale:"Preeclampsia is characterized by the onset of hypertension and either proteinuria or signs of end-organ dysfunction after 20 weeks of gestation in a previously normotensive woman. In this case, the patient presents with elevated blood pressure (150/95 mmHg) and signs of kidney problems indicated by proteinuria and elevated serum creatinine levels. Gestational hypertension would be considered if there was hypertension without proteinuria or end-organ damage. Chronic hypertension is diagnosed if hypertension was present before pregnancy or before 20 weeks of gestation. Eclampsia is diagnosed if there are seizures in a woman with preeclampsia.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Pregnancy","Pharmacology?":"FALSE"},{prompt:"Which of the following would be best for a patient with molluscum contagiosum?",answers:["Flagyl","Doxycycline","Mupirocin","Symptomatic management "],correct:3,userChoice:-1,source:"https://www.aad.org/public/diseases/a-z/molluscum-contagiosum-treatment",rationale:"Molluscum contagiosum is a viral infection caused by the poxvirus. It is self-limiting, therefore treatment is symptomatic management. Key characteristics include flesh-colored bumps on the skin with an indurated center. If these are found on children near private parts, suspect sexual abuse.",bookmarked:0,Domain:"Implement","Age Group":"Child (6-12)",Subject:"Integumentary(Derm)","Pharmacology?":"TRUE"},{prompt:"A 45-year-old patient presents with unilateral leg swelling, pain, and reddish skin. The patient recently underwent knee surgery and has been mostly immobile. Which condition is most likely causing these symptoms?",answers:["Deep vein thrombosis","Cellulitis","Peripheral artery disease","Lymphedema"],correct:0,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/deep-vein-thrombosis/symptoms-causes/syc-20352557",rationale:"Deep vein thrombosis (DVT) is highly likely given the patient's recent surgery, immobility, and symptoms of unilateral leg swelling and pain accompanied by color changes. DVT involves clot formation in deep veins, often of the legs. Peripheral artery disease typically presents with pain during walking, cellulitis with redness and warmth, and lymphedema with painless swelling.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Cardiovascular","Pharmacology?":"FALSE"},{prompt:"The absence of three or more periods in a row by someone who has had periods in the past is called?",answers:["Secondary amenorrhea","Primary amenorrhea","Menopause","Dysmenorrhea"],correct:0,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/amenorrhea/symptoms-causes/syc-20369299",rationale:"Secondary amenorrhea is defined as the absence of menstrual periods for three or more consecutive months in a woman who previously had regular menstrual cycles. Primary amenorrhea describes the condition where a female has not started menstruating by age 15. Menopause is the permanent cessation of menstrual periods, typically occurring between the ages of 45 and 55. Dysmenorrhea refers to painful periods, not the absence of periods.",bookmarked:0,Domain:"Plan","Age Group":"Adult (19-26)",Subject:"Reproductive","Pharmacology?":"FALSE"},{prompt:"A 70-year-old patient presents with a persistent, severe headache localized to the temples, visual disturbances, and jaw pain when eating. The patient also reports feeling generally unwell and experiencing occasional fevers. Based on these symptoms, which condition is most likely?",answers:["Temporal arteritis","Migraine","Trigeminal neuralgia","Cluster headaches"],correct:0,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/giant-cell-arteritis/symptoms-causes/syc-20372758",rationale:"Temporal arteritis, aka giant cell arteritis, typically presents in older adults with the symptoms mentioned. These symptoms distinguish it from migraines, which typically involve photophobia and phonophobia, trigeminal neuralgia which primarily involves facial pain without systemic symptoms, and cluster headaches which are characterized by intense, unilateral headache episodes without systemic involvement.",bookmarked:0,Domain:"Diagnose","Age Group":"Elderly (65+)",Subject:"Neurological","Pharmacology?":"FALSE"},{prompt:"Which first-line treatment should be prescribed when treating a patient with asthma?",answers:["Low dose ICS + SABA PRN","Low dose ICS + leukotriene PRN","SABA + LAMA","Med dose ICS + LAMA daily"],correct:0,userChoice:-1,source:"https://ginasthma.org/pocket-guide-for-asthma-management-and-prevention/",rationale:"The most recent GINA guidelines recommend low dose inhaled corticosteroids (ICS) combined with a short-acting beta-agonist (SABA) as needed for the first-line treatment of asthma. This approach helps to control inflammation and manage acute symptoms.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Respiratory","Pharmacology?":"TRUE"},{prompt:"A 30-year-old patient presents with complaints of severe, throbbing headaches that are often accompanied by nausea and sensitivity to light and sound. The headaches have been recurring over the past few months and are debilitating, preventing the patient from performing daily activities. What is the most appropriate treatment for this patient's acute migraine headaches?",answers:["Ibuprofen","Acetaminophen","Sumatriptan","Amitriptyline"],correct:2,userChoice:-1,source:"https://www.mayoclinic.org/drugs-supplements/sumatriptan-oral-route/description/drg-20074356",rationale:"Sumatriptan is a specific medication for treating acute migraine headaches. It is a serotonin receptor agonist (triptan) that works by constricting blood vessels and reducing inflammation, which helps to relieve migraine symptoms. Ibuprofen and acetaminophen may provide some relief for mild migraines but are generally less effective for severe, acute migraine attacks. Amitriptyline can be used as a preventative treatment for migraines but is not suitable for acute treatment.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult (26-65)",Subject:"Neurological","Pharmacology?":"TRUE"},{prompt:"Which type of anemia may cause peripheral neuropathy?",answers:["Folate anemia","Thalassemia","B12 deficiency","Iron deficiency anemia"],correct:2,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8858590",rationale:"Vitamin B12 deficiency can lead to peripheral neuropathy because B12 is essential for the maintenance of the myelin sheath that surrounds and protects nerve fibers. A deficiency can cause demyelination, leading to nerve damage and symptoms such as numbness, tingling, and weakness. Folate anemia, thalassemia, and iron deficiency anemia do not typically cause peripheral neuropathy.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Hematopoietic","Pharmacology?":"FALSE"},{prompt:"What is the diagnostic imaging of choice for appendicitis?",answers:["US","CT","MRI","Abdominal X-ray"],correct:1,userChoice:-1,source:"https://journalofethics.ama-assn.org/article/ct-scans-diagnosis-appendicitis/2006-03",rationale:"CT is often considered the best imaging for appendicitis due to its high accuracy in detecting the presence of an inflamed appendix as well as any complications such as perforation or abscess. While Ultrasound is used, particularly in pregnant women and children to avoid radiation, CT provides a more detailed view and is preferred in unclear cases. MRI is rarely used due to cost and accessibility, and Abdominal X-rays are not typically effective for diagnosing appendicitis.",bookmarked:0,Domain:"Diagnose","Age Group":"Adult (19-26)",Subject:"Gastrointestinal","Pharmacology?":"FALSE"},{prompt:"A 52-year-old alcoholic man presents to the clinic complaining of fatigue and shortness of breath. His physical examination reveals pale conjunctiva and a smooth tongue. Laboratory tests show macrocytic anemia. What is the most likely cause of this anemia?",answers:["Folate deficiency","Iron Deficiency","Aplastic anemia","Sickle cell disease"],correct:0,userChoice:-1,source:"https://www.hematology.org/education/patients/anemia",rationale:"In patients with alcohol dependence, folate deficiency is the most common cause of macrocytic anemia. Alcohol interferes with folate absorption and metabolism, leading to decreased levels of this essential vitamin, which is required for proper DNA synthesis and red blood cell formation. The clinical presentation of fatigue, shortness of breath, and specific findings such as pale conjunctiva and a smooth tongue (glossitis) further support a diagnosis of folate deficiency anemia.<ul><li>A) Iron deficiency typically causes microcytic anemia, not macrocytic, and is less likely in this scenario without evidence of bleeding or malnutrition.</li><li>C) Aplastic anemia, which involves the failure of bone marrow to produce blood cells, is a possible but less likely diagnosis without evidence of pancytopenia (reduction in red and white blood cells and platelets).</li><li>D) Sickle cell disease is a genetic disorder causing abnormally shaped red blood cells and is not associated with alcohol use or macrocytosis.</li></ul>",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Hematopoietic","Pharmacology?":"FALSE"},{prompt:"A 30-year-old female complains of bleeding gums after brushing her teeth and prolonged bleeding from minor cuts and injuries for the past two months. Her latest CBC reveals platelet count of 19,000 mm3, hemoglobin of 8 g/dL, and WBC count of 75,000/mm3. What is her most likely diagnosis?",answers:["Acute leukemia","Drug-induced thrombocytopenia","Hemolytic anemia","Idiopathic thrombocytopenic purpura"],correct:0,userChoice:-1,source:"https://www.hematology.org/education/patients/blood-cancers/leukemia",rationale:"The patient's symptoms of bleeding gums and prolonged bleeding from minor cuts, along with a significantly low platelet count (150k to 450k is normal) and an extremely elevated WBC count (4k to 11k is normal), are highly suggestive of acute leukemia. Note that low platelet can have multiple causes we suspect leukemia when in conjuction with the other symptons and results. Acute leukemia often presents markedly elevated WBC count due to their rapid proliferation.<br>Drug-induced thrombocytopenia and idiopathic thrombocytopenic purpura (ITP) typically do not present with such high WBC counts, and hemolytic anemia primarily affects red blood cells rather than white blood cells and platelets.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Hematopoietic","Pharmacology?":"FALSE"},{prompt:"Which of the following lab values are usually elevated in alcoholic patients?",answers:["Hgb and Hct","AST and ALT","LDL and HDL","Albumin"],correct:1,userChoice:-1,source:"https://www.medleague.com/diagnosis-of-alcoholism/",rationale:"AST (aspartate aminotransferase) and ALT (alanine aminotransferase) are liver enzymes that are commonly elevated in individuals with alcoholism. Chronic alcohol consumption can lead to liver inflammation and damage, resulting in the release of these enzymes into the bloodstream. Elevated levels of AST and ALT are key indicators of liver injury and are used to help diagnose and monitor the progression of liver disease related to alcohol use. Ratio of 2:1 with AST/ALT is associated with alcohol abuse. LOW protein/albumin levels indicates the patient’s poor nutritional status.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Gastrointestinal","Pharmacology?":"FALSE"},{prompt:"Mr Smith complains of headaches that wake him up in the middle of the night with intense pain around the right eye on one side of the head. He tells you the headaches are short-lived but happen many times in a day. What is the best treatment for this type of headache?",answers:["Acetaminophen","Caffeine","Phenytoin (Dilantin)","100% oxygen via mask"],correct:3,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/cluster-headache/diagnosis-treatment/drc-20352084",rationale:"The headache described is a cluster headache which usually awakens the patient at night and is felt in or around one eye, lasts a few minutes and happens multiple times in a day. 1st line treatment is 100% O2 via mask.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult (26-65)",Subject:"Neurological","Pharmacology?":"TRUE"},{prompt:"A 30-year-old patient presents with low-grade fever, stuffy nose, productive cough, and a whistling sound while breathing. The NP suspects acute bronchitis. What is the first-line treatment?",answers:["Antibiotics.","Inhaled corticosteroids.","Bronchodilators.","Rest and hydration."],correct:3,userChoice:-1,source:"https://www.lung.org/lung-health-diseases/lung-disease-lookup/bronchitis/symptoms-diagnosis-treatment",rationale:"The first-line treatment for acute bronchitis is supportive care, including rest and hydration because most cases go away on their own. Most cases are caused by viral infections, so antibiotics are not effective. Inhaled corticosteroids are not typically used unless there is an underlying chronic condition like asthma. Bronchodilators may be used if there is significant wheezing, but they are not the primary treatment.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult (26-65)",Subject:"Respiratory","Pharmacology?":"TRUE"},{prompt:"A 70-year-old patient is reviewing her Medicare coverage options and asks you, her nurse practitioner, what services are covered under Medicare Part A. Your reply should include:",answers:["Inpatient hospital care","Prescription medications filled at a pharmacy","Outpatient physical therapy","Routine vision exams"],correct:0,userChoice:-1,source:"https://www.medicare.gov/basics/get-started-with-medicare/medicare-basics/parts-of-medicare",rationale:"Medicare Part A primarily covers inpatient hospital care, skilled nursing facility care, hospice care, and some home health care. It does not cover outpatient physical therapy, which is covered under Medicare Part B. Prescription medications filled at a pharmacy are under Part D. Routine vision exams are not in Part A; these may be covered under Part B or supplemental plans.",bookmarked:0,Domain:"Plan","Age Group":"Elderly (65+)",Subject:"Non-Clinical","Pharmacology?":"FALSE"},{prompt:"A 45-year-old female comes into your office complaining of lower back pain, urinary frequency, and burning with urination. She is allergic to sulfa drugs and penicillin. You recognize she has pyelonephritis. Which antibiotic should you prescribe?",answers:["Doxycycline","Cipro","Amoxicillin","Bactrim"],correct:1,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/books/NBK535454",rationale:"Cipro (ciprofloxacin) is recommended to treat this complicated UTI case of pyelonephritis because it is a broad-spectrum antibiotic effective against the common gram-negative bacteria that cause urinary tract infections, including kidney infections. Doxy and amoxicillin have inferior efficacy against the gram-negative bacteria causing the infection, and do not achieve cipro's higher concentrations in the kidneys. Bactrim is a sulfa drug which the patient is allergic to.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult (26-65)",Subject:"Genitourinary&Renal","Pharmacology?":"TRUE"},{prompt:"What condition is diagnosed when a sputum smear tests positive for acid-fast bacilli?",answers:["Haemophilus influenzae","Legionella pneumonia","Streptococcus pneumoniae","Tuberculosis"],correct:3,userChoice:-1,source:"https://www.cdc.gov/tb/about/",rationale:"A positive sputum smear for acid-fast bacilli is diagnostic of tuberculosis (TB). Mycobacterium tuberculosis, the bacteria causing TB, is an acid-fast bacillus. The acid-fast staining technique highlights these bacteria, confirming their presence in the sputum and thus diagnosing TB.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult and Elderly",Subject:"Respiratory","Pharmacology?":"FALSE"},{prompt:"Hydrochlorothiazide contraindications include?",answers:["Diabetics","Gout","Hyperlipidemia","All of the above"],correct:3,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6802803/",rationale:"Hydrochlorothiazide is contraindicated in certain populations due to its side effects. It can increase blood glucose levels (Hyperglycemia), making it less suitable for diabetics. It can also increase uric acid levels (hyperuricemia), which can exacerbate gout. Additionally, it can have adverse effects on lipid profiles, potentially worsening hyperlipidemia. Therefore, it is contraindicated for individuals with diabetes, gout, and hyperlipidemia.",bookmarked:0,Domain:"Plan","Age Group":"Elderly (65+)",Subject:"Cardiovascular","Pharmacology?":"TRUE"},{prompt:"What would be considered positive for a tuberculin purified protein derivative (PPD) reading on a migrant worker from latin america?",answers:["3mm or greater ","5mm or greater ","10mm or greater ","15mm or greater"],correct:2,userChoice:-1,source:"https://www.cdc.gov/tb/hcp/testing-diagnosis/tuberculin-skin-test.html",rationale:"For individuals such as migrant workers who are at higher risk for tuberculosis exposure from their home country, a tuberculin purified protein derivative (PPD) reading of 10mm or greater is considered positive. This is based on guidelines from the CDC, which take into account the increased likelihood of TB exposure in high-risk populations. A positive result indicates the need for further evaluation and possible treatment for TB infection.",bookmarked:0,Domain:"Assess","Age Group":"Older Adult (26-65)",Subject:"Respiratory","Pharmacology?":"FALSE"},{prompt:"Bell’s Palsy results from damage to the _____ cranial nerve.",answers:["IV (trochlear)","V (trigeminal)","VII (facial)","VIII (vestibulocochlear)"],correct:2,userChoice:-1,source:"https://www.hopkinsmedicine.org/health/conditions-and-diseases/bells-palsy",rationale:"Bell's palsy is an unexplained episode of facial muscle weakness or paralysis. It begins suddenly and worsens over 48 hours. This condition results from damage to the facial nerve (the 7th cranial nerve). Pain and discomfort usually occur on one side of the face or head.",bookmarked:0,Domain:"Plan","Age Group":"Elderly (65+)",Subject:"Neurological","Pharmacology?":"FALSE"},{prompt:"A 24-year-old female presents with symptoms of vaginal discharge and pelvic pain. She is sexually active with multiple partners and is concerned about the possibility of sexually transmitted infections. Which test is the most sensitive for diagnosing gonorrhea and chlamydia?",answers:["Nucleic acid amplification test (NAAT).","Urinalysis","Blood cultures","Gram stain"],correct:0,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3372150/",rationale:"The nucleic acid amplification test (NAAT) is the most sensitive and specific test for diagnosing gonorrhea and chlamydia. It detects the genetic material of the bacteria, providing highly accurate results. Urinalysis can suggest an infection but is not specific for gonorrhea and chlamydia. Culture and Gram stain are less sensitive.",bookmarked:0,Domain:"Diagnose","Age Group":"Adult (19-26)",Subject:"Reproductive","Pharmacology?":"FALSE"},{prompt:"A 30-year-old male comes in with painful and difficult urination, pain in the groin/pelvic area. He tells you he suffers from chronic urinary tract infections (UTIs). UA culture is positive for Escherichia coli. What is one intervention the NP knows to avoid with this condition?",answers:["Treat with NSAIDs","Treat with antibiotics","Avoid prostate massage","Alpha blockers can be used to reduce prostate inflammation"],correct:2,userChoice:-1,source:"https://www.verywellhealth.com/things-to-know-about-prostate-health-4066015",rationale:"Prostate massage carries some significant risks as it can potentially spread the infection to the bloodstream. Treatment includes NSAIDs and antibiotics, and patient education includes the avoidance of foods that can irritate the bladder including hot peppers, caffeine and alcohol.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Genitourinary&Renal","Pharmacology?":"TRUE"},{prompt:"What does a score 3 suggest in the Mini-Mental State Exam (MMSE)?",answers:["Mild dementia","Moderate dementia","Severe dementia","No dementia"],correct:2,userChoice:-1,source:"https://www.healthdirect.gov.au/mini-mental-state-examination-mmse#:~:text=GP%20or%20specialist.-,How%20is%20the%20MMSE%20scored%3F,abnormal%2C%20indicating%20possible%20cognitive%20impairment.",rationale:"A score of 3 on the MMSE indicates severe cognitive impairment. The MMSE scores range from 0 to 30, with higher scores indicating better cognitive function. A score between 1-10 is generally considered indicative of severe dementia, distinguishing it from mild and moderate dementia, which are associated with higher scores.",bookmarked:0,Domain:"Diagnose","Age Group":"Elderly (65+)",Subject:"Psychiatric","Pharmacology?":"FALSE"},{prompt:"Which organism causes Shingles?",answers:["Varicella zoster virus (VZV)","Herpes simplex 1 virus","Herpes simplex 2 virus","Cytomegalovirus"],correct:0,userChoice:-1,source:"https://www.cdc.gov/shingles/index.html",rationale:"Varicella zoster virus is shingle’s causative organism. HSV-1 -usually causes blisters around the mouth and lips. HSV-2 - usually causes blisters around the genitals and rectum. Cytomegalovirus (CMV) is a common virus that is usually harmless. Sometimes it causes problems in babies if you get it during pregnancy (congenital CMV).",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"We use a Potassium hydroxide (KOH) prep to diagnose _______.",answers:["Viral infections","Bacterial infection","Protozoa infection","Fungal infection "],correct:3,userChoice:-1,source:"https://medlineplus.gov/ency/article/003761.htm",rationale:"A potassium hydroxide (KOH) prep is a diagnostic test used to identify fungal infections of the skin. The KOH solution dissolves keratin and other cellular material in a sample, making fungal elements such as hyphae or yeast cells more visible under a microscope. It is not used for diagnosing viral, bacterial, or protozoa infections.",bookmarked:0,Domain:"Diagnose","Age Group":"Adult (19-26)",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"Positive clue cells are present in which diagnosis?",answers:["Chlamydia","Trichomonas","Genital herpes","Bacterial Vaginosis"],correct:3,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/bacterial-vaginosis/diagnosis-treatment/drc-20352285",rationale:"The presence of clue cells is a key diagnostic criterion for BV, which is characterized by a disruption of the normal vaginal flora. Chlamydia, Trichomonas, and Genital Herpes do not typically present with clue cells; these conditions have different diagnostic criteria and manifestations.",bookmarked:0,Domain:"Assess","Age Group":"Older Adult (26-65)",Subject:"Reproductive","Pharmacology?":"FALSE"},{prompt:"Patient education for preeclampsia should NOT include:",answers:["Bed rest except for bathroom privileges","Close monitoring of weight and blood pressure","Close follow up of urinary protein, serum creatinine and platelet count","A prescription of methyldopa (Aldomet)"],correct:3,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/preeclampsia/diagnosis-treatment/drc-20355751#",rationale:"Medication management is not 1st line tx so a prescription of methyldopa (Aldoment) to control blood pressure is incorrect. The primary treatment for preeclampsia is either to deliver the baby or manage the condition until the best time to deliver the baby.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Pregnancy","Pharmacology?":"TRUE"},{prompt:"A patient presents with red eyes, a thick yellow-green discharge, and eyelids that are stuck together upon waking. The patient reports no itching but mentions mild eye pain and sensitivity to light. The symptoms started two days ago and have progressively worsened. Based on the symptoms, what type of conjunctivitis is most likely?",answers:["Allergic","Bacterial","Viral","Fungal"],correct:1,userChoice:-1,source:"https://www.healthdirect.gov.au/conjunctivitis",rationale:"The patient's symptoms of red eyes, thick yellow-green discharge, and eyelids that are stuck together upon waking are indicative of bacterial conjunctivitis. Bacterial conjunctivitis is characterized by purulent (pus-like) discharge, which can cause the eyelids to stick together. The lack of itching helps differentiate it from allergic conjunctivitis, which typically involves significant itching. Viral conjunctivitis usually presents with watery discharge rather than thick discharge and is often associated with other viral symptoms like a cold or sore throat. Fungal conjunctivitis is rare and not typically associated with such symptoms.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Head_Eyes&ENT","Pharmacology?":"FALSE"},{prompt:"If a patient tests positive for the hep B antibody and negative for the Hep B antigen, what is the correct course of action to take?",answers:["Administer hepatitis B vaccine","Administer IVIG","Administer both hepatitis B vaccine and IVIG","Do nothing"],correct:3,userChoice:-1,source:"https://www.cdc.gov/hepatitis-b/hcp/diagnosis-testing/",rationale:"A positive test for the hepatitis B antibody (anti-HBs) and a negative test for the hepatitis B antigen (HBsAg) typically indicates that the patient has either recovered from a past infection or has been successfully vaccinated against hepatitis B. In this case, the immune system has effectively responded to the virus or the vaccine, rendering further action like vaccination or IVIG administration unnecessary",bookmarked:0,Domain:"Implement","Age Group":"Adult (19-26)",Subject:"Gastrointestinal","Pharmacology?":"TRUE"},{prompt:"Which of the following are common findings in a young primigravida with pregnancy-induced hypertension?",answers:["Edema","Abdominal cramping","Light vaginal bleeding, spotting","Dysuria"],correct:0,userChoice:-1,source:"https://my.clevelandclinic.org/health/diseases/4497-gestational-hypertension",rationale:"Edema, or swelling, particularly in the hands and face, is a common finding in pregnancy-induced hypertension (PIH), also known as gestational hypertension. While some swelling is typical in pregnancy, the sudden appearance of severe or atypical edema can be a sign of PIH. The other symptoms listed, such as abdominal cramping, light vaginal bleeding, and dysuria, are less specifically associated with gestational hypertension and are more indicative of other obstetric complications.",bookmarked:0,Domain:"Diagnose","Age Group":"Adult (19-26)",Subject:"Pregnancy","Pharmacology?":"FALSE"},{prompt:"A 55-year-old patient presents with sudden, severe, stabbing pain on one side of the face. The pain is described as electric shock-like, lasts for a few seconds, and can be triggered by everyday activities such as chewing, speaking, or touching the face. The episodes have been occurring more frequently over the past few weeks. What is the most likely diagnosis?",answers:["Cluster headaches","Migraine headaches","Trigeminal neuralgia","Temporomandibular joint disorder"],correct:2,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/trigeminal-neuralgia/symptoms-causes/syc-20353344",rationale:"Trigeminal neuralgia, aka tic douloureux is characterized by sudden, severe, stabbing pain on one side of the face that is often described as electric shock-like. The pain can be triggered by everyday activities such as chewing, speaking, or touching the face. Cluster headaches and migraine headaches do not typically present with this type of brief, triggered pain, and TMJ disorder usually involves pain in the jaw and surrounding muscles rather than sharp, electric shock-like pain.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Neurological","Pharmacology?":"FALSE"},{prompt:"What should the nurse practitioner prescribe to treat mycoplasma pneumonia in an otherwise healthy young adult?",answers:["Penicillin","Fluoroquinolone","Azithromycin","Tetracycline"],correct:2,userChoice:-1,source:"https://www.cdc.gov/pneumonia/atypical/mycoplasma/hcp/antibiotic-treatment-resistance.html",rationale:"Azithromycin is recommended for the treatment of mycoplasma pneumonia, especially in otherwise healthy young adults. Mycoplasma pneumoniae lacks a cell wall, making antibiotics that target cell wall synthesis, such as penicillin, ineffective. Fluoroquinolones and tetracyclines are alternative options, but azithromycin, a <b>macrolide</b>, is typically preferred due to its efficacy and favorable side effect profile.",bookmarked:0,Domain:"Implement","Age Group":"Adult (19-26)",Subject:"Respiratory","Pharmacology?":"TRUE"},{prompt:"Which antipsychotic medication is most likely to produce side effects including: inability to sit still, involuntary muscle contractions, tremors, stiff muscles, and involuntary facial movements?",answers:["Haloperidol (Haldol)","Sertraline (Zoloft)","Citalopram (Celexa)","Olanzapine (Zyprexa)"],correct:0,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/books/NBK534115/",rationale:"Haloperidol (Haldol) is a first-generation antipsychotic that has the potential to produce extrapyramidal effects. Example of extrapyramidal effects include inability to sit still, involuntary muscle contractions, tremors, stiff muscles, and involuntary facial movements.",bookmarked:0,Domain:"Plan","Age Group":"Adult (19-26)",Subject:"Psychiatric","Pharmacology?":"TRUE"},{prompt:"Which of the following conditions is most commonly associated with cystic fibrosis?",answers:["Bronchiectasis","Bronchiolitis","Pneumonitis","Pulmonary hypertension"],correct:0,userChoice:-1,source:"https://cystic-fibrosis.com/bronchiectasis",rationale:"Bronchiectasis is a common complication in patients with cystic fibrosis due to the chronic obstruction and infection of the airways, leading to permanent dilation and damage of the bronchial walls. This results in recurrent respiratory infections and chronic productive cough, which are hallmark symptoms in cystic fibrosis patients.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Respiratory","Pharmacology?":"FALSE"},{prompt:"If the TSH is elevated and the T4 is low, you should _______ levothyroxine.",answers:["Decrease","Increase","Not change","Double up"],correct:1,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6822824/",rationale:"Increase: elevated TSH and decreased T4 is hypothyroidism. If the patient is on levothyroxine, the drug needs to be increased to increase T4 level.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult (26-65)",Subject:"Endocrine","Pharmacology?":"TRUE"},{prompt:"Which of the following statements is true regarding testicular cancer?",answers:["A CT scan is the preferred initial imaging method for evaluating a scrotal mass.","It is the most common neoplasm in men aged 20-35.","Patients usually present with a single, painful testicular lesion.","The five-year survival rate after orchiectomy and therapy is less than 50%."],correct:1,userChoice:-1,source:"https://www.cancer.org/cancer/types/testicular-cancer/about/key-statistics.html",rationale:"Testicular cancer is the most common neoplasm in men aged 20-35 due to the higher prevalence of germ cell tumors within this age group. These tumors, which originate from the cells responsible for producing sperm, tend to develop during early adulthood. The exact cause is not well understood, but factors such as genetic predisposition, undescended testicles (cryptorchidism), and certain inherited conditions increase the risk. Early detection and treatment are crucial for favorable outcomes, as testicular cancer is highly responsive to therapy, especially when diagnosed early.<ul><li>A) An <strong>ultrasound</strong> is the preferred initial imaging method for diagnosing testicular cancer due to its specificity, safety, and accessibility.</li><li>C) Patients typically discover a painless testicular <strong>nodule</strong>.</li><li>D) The 5-year survival rate for most testicular cancer after orchiectomy and therapy is <strong>more than 90%</strong>.</li></ul>",bookmarked:0,Domain:"Plan","Age Group":"Adult (19-26)",Subject:"Reproductive","Pharmacology?":"FALSE"},{prompt:"What is the treatment of choice for non-purulent cellulitis?",answers:["Clindamycin","Trimethoprim/sulfamethoxazole (Bactrim)","Hydrocortisone","Cefalexin (Keflex) "],correct:3,userChoice:-1,source:"https://www.cdc.gov/group-a-strep/hcp/clinical-guidance/cellulitis.html",rationale:"The treatment of choice for non-purulent cellulitis is typically an antibiotic that is effective against streptococci and staphylococci, such as cefalexin (Keflex). Non-purulent cellulitis is usually caused by beta-hemolytic streptococci and Staphylococcus aureus, and cefalexin is effective against these pathogens. Clindamycin and trimethoprim/sulfamethoxazole (Bactrim) can be used in certain cases, but are more often reserved for patients with a history of MRSA or penicillin allergy. Hydrocortisone is not an appropriate treatment for bacterial infections such as cellulitis.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult (26-65)",Subject:"Integumentary(Derm)","Pharmacology?":"TRUE"},{prompt:"A 32-year-old pregnant woman in her third trimester presents with sudden-onset severe abdominal pain and vaginal bleeding. She also reports decreased fetal movements. On examination, her abdomen is tender and rigid, and her vital signs indicate hypotension and tachycardia. What is the most appropriate next step in management?",answers:["Administer oral pain relief and monitor.","Schedule an urgent outpatient ultrasound.","Send to the Emergency Room","Refer to the obstetrician "],correct:2,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/placental-abruption/symptoms-causes/syc-20376458",rationale:"Placental abruption is a serious condition where the placenta detaches from the uterine wall before delivery, which can compromise the blood and oxygen supply to the fetus and cause severe maternal hemorrhage. Immediate evaluation and management in an emergency department are crucial to stabilize both the mother and the fetus, and to determine the need for urgent delivery.",bookmarked:0,Domain:"Implement","Age Group":"Adult (19-26)",Subject:"Pregnancy","Pharmacology?":"FALSE"},{prompt:"What is the treatment of choice for temporal ateritis?",answers:["NSAIDs","Carbamazepine","Long term steroids","Gabapentin"],correct:2,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/giant-cell-arteritis/diagnosis-treatment/drc-20372764",rationale:"The main treatment for giant cell arteritis involves long-term use of steroids (6 months), specifically corticosteroids, to reduce artery inflammation and prevent complications such as vision loss. NSAIDs may be used for symptomatic relief but are not sufficient as a primary treatment. Carbamazepine and Gabapentin are used for neuropathic pain and are not effective in treating giant cell arteritis.",bookmarked:0,Domain:"Implement","Age Group":"Elderly (65+)",Subject:"Neurological","Pharmacology?":"TRUE"},{prompt:"A patient with a history of conjunctivitis comes in complaining of itching, burning, and discharge from both eyes that is stringy. What is the best treatment choice for this type of conjunctivitis?",answers:["Moxifloxacin 0.5% drops","Trimethoprim/polymyxin B drops","Topical antihistamines/mast cell stabilizers","Gentamicin 0.3% ointment"],correct:2,userChoice:-1,source:"https://www.aoa.org/healthy-eyes/eye-and-vision-conditions/conjunctivitis?sso=y",rationale:"The symptoms described—itching, burning, and stringy discharge—are indicative of <u>allergic</u> conjunctivitis; <u>bacterial</u> is purulent and <u>viral</u> is watery. The best treatment choice for allergic conjunctivitis is topical antihistamines or mast cell stabilizers, which help to alleviate allergic symptoms by reducing inflammation and controlling allergic reactions. Moxifloxacin, trimethoprim/polymyxin B, and gentamicin are antibiotics and would be appropriate for bacterial conjunctivitis, not allergic conjunctivitis.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult (26-65)",Subject:"Head_Eyes&ENT","Pharmacology?":"TRUE"},{prompt:"A 70-year-old female has several lesions that appear as if 'pasted on' the skin, scaly, brown, and varying in size and shape. What is the name this skin condition?",answers:["Seborrheic Keratosis","Actinic Keratosis","Melanoma","Psoriasis"],correct:0,userChoice:-1,source:"https://my.clevelandclinic.org/health/diseases/21721-seborrheic-keratosis",rationale:"Seborrheic Keratosis is a common, noncancerous, skin growth characterized by benign, often pigmented, growths that have a 'stuck on' appearance. People tend to get them as they get older. Actinic Keratosis presents as rough, scaly patches due to sun exposure, Melanoma is a serious form of skin cancer with asymmetric, irregular borders and multiple colors, and Psoriasis typically presents with red, scaly plaques that may be itchy or painful.",bookmarked:0,Domain:"Implement","Age Group":"Elderly (65+)",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"Fill in the blanks: ___ is caused by 'wear and tear' while ___ is an autoimmune disease. Prescribe corticosteroids to alleviate ___ symptoms, Acetaminophen for ___ symptoms.",answers:["RA, OA, RA, OA","OA, RA, RA, OA","OA, RA, OA, RA","RA, OA, OA, RA"],correct:1,userChoice:-1,source:"https://www.mayoclinic.org/diseases-conditions/arthritis/symptoms-causes/syc-20350772",rationale:"Osteoarthritis (OA) is a degenerative joint disease caused by 'wear and tear' on the joints, leading to the breakdown of cartilage. Rheumatoid arthritis (RA) is an autoimmune disease where the immune system attacks the joints, causing inflammation. Corticosteroids are prescribed to alleviate symptoms of RA due to their anti-inflammatory properties, while Acetaminophen is commonly used to manage pain in OA without addressing inflammation.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult and Elderly",Subject:"Musculoskeletal","Pharmacology?":"FALSE"},{prompt:"The ____ is provoked by having the supine patient lift the thigh against hand resistance or with the patient laying on their contralateral side while the hip joint is passively extended.",answers:["psoas sign","obturator sign","Murphy's sign","McBurney's sign"],correct:0,userChoice:-1,source:"https://www.sciencedirect.com/topics/medicine-and-dentistry/psoas-sign",rationale:"The psoas sign is used to assess for irritation of the psoas muscle, which can occur in cases of appendicitis. It is provoked by having the patient lift their thigh against resistance while supine or by passively extending the hip joint while the patient lies on their contralateral side. Pain elicited during these maneuvers suggests a positive psoas sign, indicating possible appendicitis",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult and Elderly",Subject:"Musculoskeletal","Pharmacology?":"FALSE"},{prompt:"What is the most appropriate initial treatment for blepharitis?",answers:["Topical antibiotics","Systemic corticosteroids","Artificial tears","Warm compresses and eyelid hygiene"],correct:3,userChoice:-1,source:"https://www.aao.org/eye-health/diseases/what-is-blepharitis",rationale:"The initial treatment for blepharitis typically involves conservative measures such as warm compresses and eyelid hygiene. These methods help to reduce inflammation and remove crusts and debris from the eyelids. Topical antibiotics may be used if there is a secondary bacterial infection, but they are not the first-line treatment. Systemic corticosteroids are generally not indicated for blepharitis, and while artificial tears can help alleviate dry eye symptoms, they do not address the underlying inflammation and debris associated with blepharitis.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult and Elderly",Subject:"Head_Eyes&ENT","Pharmacology?":"TRUE"},{prompt:"A patient comes in complaining of red, itchy, and scaly patches over the knees and elbows. Upon examination you notice silvery scales. What is the most likely diagnosis?",answers:["Psoriasis","Eczema","Erythematous plaques","Erysipelas "],correct:0,userChoice:-1,source:"https://www.aad.org/public/diseases/psoriasis/what/symptoms",rationale:"The presence of red, itchy, and scaly patches with silvery scales on the knees and elbows is characteristic of psoriasis. Psoriasis is a chronic autoimmune condition that causes rapid skin cell turnover, leading to thickened, scaly patches. Eczema typically presents with more diffuse itching and inflammation without the distinctive silvery scales. Erythematous plaques are a general description of red patches and can occur in various conditions, but the specific presentation of silvery scales points to psoriasis. Erysipelas is a bacterial skin infection that usually presents with sharply demarcated, raised, and warm red areas, not scaly patches.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"Which test is diagnostic for deep vein thrombosis (DVT)?",answers:["Angiogram ","Ankle-Brachial Index (ABI)","Duplex ultrasonography","Contrast venography"],correct:2,userChoice:-1,source:"https://www.cdc.gov/blood-clots/testing-diagnosis/",rationale:"Duplex ultrasonography should be the first choice for diagnosing DVT because it is non-invasive, widely available, and highly accurate for detecting blood clots in the veins. Angiogram and contrast venography are more invasive procedures and are not typically used as the initial diagnostic tools. The Ankle-Brachial Index (ABI) is used to diagnose peripheral artery disease, not DVT.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Cardiovascular","Pharmacology?":"FALSE"},{prompt:"What is the ABCDE of melanoma?",answers:["Asymmetry, borders, color, depth, evolution","Atrophy, borders, color, dimension, elevation","Asymmetry, borders, characteristics, dimension, elevation","Asymmetry, borders, color, diameter, evolution"],correct:3,userChoice:-1,source:"https://www.aad.org/public/diseases/skin-cancer/find/at-risk/abcdes",rationale:'<ol style="list-style-type: upper-alpha;"><li>Asymmetry: One half of the spot is unlike the other half.</li><li>Border: The spot has an irregular, scalloped, or poorly defined border.</li><li>Color: The spot has varying colors from one area to the next, such as shades of tan, brown or black, or areas of white, red, or blue.</li><li>Diameter: While melanomas are usually greater than 6 millimeters, or about the size of a pencil eraser, when diagnosed, they can be smaller.</li><li>Evolving: The spot looks different from the rest or is changing in size, shape, or color.</li></ol>',bookmarked:0,Domain:"Plan","Age Group":"Older Adult and Elderly",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"Which murmur is characterized as high-pitched/harsh, and heard at the upper left sternal border?",answers:["Mitral valve prolapse","Aortic stenosis","Mitral regurgitation","Pulmonary flow"],correct:3,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6368429/",rationale:"Pulmonary flow murmur is heard on the left sternal border. Because they are high pitched, they are heard best with the diaphragm of the stethoscope.",bookmarked:0,Domain:"Diagnose","Age Group":"Elderly (65+)",Subject:"Cardiovascular","Pharmacology?":"FALSE"},{prompt:"What is the most common cancer for both men and women?",answers:["Skin","Lung","Pancreatic","Colorectal"],correct:0,userChoice:-1,source:"https://www.cdc.gov/skin-cancer/statistics/index.html",rationale:"Skin cancer, specifically Basal Cell carcinoma, is the most common type of cancer for both men and women. The most common death causing cancer for both men and women is lung cancer.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult (26-65)",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"A patient living in a wooded area of the upper Midwest presents with a red, expanding rash that has a clear center, along with flu-like symptoms such as fever, fatigue, headache, and muscle aches. What is the most likely diagnosis?",answers:["Rocky Mountain spotted fever","Lyme disease","Ehrlichiosis","Babesiosis"],correct:1,userChoice:-1,source:"https://www.cdc.gov/lyme/signs_symptoms/index.html",rationale:"The patient presents with a characteristic 'bull's-eye' rash (erythema migrans) and flu-like symptoms, which are indicative of the first stage of Lyme disease. Lyme disease is transmitted by ticks, which are prevalent in wooded areas of the upper Midwest. Rocky Mountain spotted fever, ehrlichiosis, and babesiosis are other tick-borne illnesses but have different symptom profiles and geographic prevalence. The 'bull's-eye' rash is a key indicator of Lyme disease.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Integumentary(Derm)","Pharmacology?":"FALSE"},{prompt:"Which of the following is not a risk factor for colon cancer?",answers:["Cholecystectomy","Family history of polyps","Race","Hematochezia"],correct:3,userChoice:-1,source:"https://www.cancer.org/cancer/types/colon-rectal-cancer/causes-risks-prevention/risk-factors.html",rationale:"Hematochezia, which is the presence of blood in stool, is a symptom of colon cancer rather than a risk factor. Cholecystectomy, family history of polyps, and race are all established risk factors for developing colon cancer.",bookmarked:0,Domain:"Plan","Age Group":"Older Adult and Elderly",Subject:"Gastrointestinal","Pharmacology?":"FALSE"},{prompt:"A patient diagnosed with emphysema is seeking treatment for his hight blood pressure. The NP should advise him to avoid which antihypertensive?",answers:["Calcium Channel blockers","Beta-blockers","Thiazides","Angiotensin-converting enzyme (ACE)"],correct:1,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10377707/",rationale:"Beta-blockers can potentially exacerbate respiratory symptoms in patients with emphysema by causing constriction of the airways. This effect is particularly concerning in patients with underlying obstructive pulmonary diseases. Other classes of antihypertensives do not generally have this effect. Non-selective beta blockers act on beta 1 and beta 2 receptors. We have beta 1 receptors in the heart and beta 2 in the lungs (easy way to remember is that we have 1 heart and 2 lungs). When beta 1 receptors are blocked, it affects the heart by slowing down the heart rate. When beta 2 receptors are blocked, it causes vasoconstriction/vasospasms in the lungs.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult (26-65)",Subject:"Cardiovascular","Pharmacology?":"TRUE"},{prompt:"What is the preferred treatment for Rocky Mountain Spotted Fever?",answers:["Amoxicillin","Cipro","Doxycycline","Azithromycin "],correct:2,userChoice:-1,source:"https://www.cdc.gov/rocky-mountain-spotted-fever/hcp/clinical-care/",rationale:"Doxycycline is the preferred treatment for Rocky Mountain Spotted Fever and all other tickborne rickettsial diseases. Use of antibiotics other than doxycycline is associated with a higher risk of fatal outcome from RMSF. Presumptive treatment with doxycycline is recommended in patients of all ages, including children <8 years of age",bookmarked:0,Domain:"Implement","Age Group":"Older Adult (26-65)",Subject:"Integumentary(Derm)","Pharmacology?":"TRUE"},{prompt:"A patient presents with red, watery eyes, and a clear discharge. The patient also reports a recent upper respiratory infection with symptoms such as a sore throat and runny nose. There is no significant pain or itching. The symptoms started three days ago and have been gradually spreading to the other eye. Based on the symptoms, what type of conjunctivitis is most likely?",answers:["Allergic","Bacterial","Viral","Fungal"],correct:2,userChoice:-1,source:"https://www.healthdirect.gov.au/conjunctivitis",rationale:"The patient's symptoms of red, watery eyes with clear discharge and a recent upper respiratory infection suggest viral conjunctivitis. Viral conjunctivitis is commonly associated with upper respiratory infections and presents with watery discharge and redness. The absence of significant pain and itching helps differentiate it from bacterial conjunctivitis, which typically has thick, purulent discharge, and allergic conjunctivitis, which involves significant itching. Fungal conjunctivitis is rare and usually occurs in individuals with a compromised immune system.",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult (26-65)",Subject:"Head_Eyes&ENT","Pharmacology?":"FALSE"},{prompt:"Which of the following is a sign for acute pancreatitis?",answers:["Murphy’s","Appley’s","Grey-Turner","Battle "],correct:2,userChoice:-1,source:"https://www.ncbi.nlm.nih.gov/books/NBK534296",rationale:"Grey-Turner sign is characterized by bruising or a bluish discoloration on the flanks (the sides of the body between the ribs and the hips). It indicates retroperitoneal hemorrhage, which can occur in conditions such as acute pancreatitis, trauma, or ruptured ectopic pregnancy. This sign suggests severe internal bleeding and requires prompt medical evaluation and intervention.<ul><li>Murphy&rsquo;s is for cholelithiasis.</li><li>Appley&rsquo;s is for meniscus.</li><li>Battle indicates skull fracture.</li></ul>",bookmarked:0,Domain:"Diagnose","Age Group":"Older Adult and Elderly",Subject:"Gastrointestinal","Pharmacology?":"FALSE"},{prompt:"What is the preferred treatment for unknown Chlamydia and positive Gonorrhea?",answers:["Azithromycin and Ceftriaxone","Augmentin and Azithromycin","Ceftriaxone and Augmentin","Azithromycin and Doxycycline "],correct:0,userChoice:-1,source:"https://www.aafp.org/pubs/afp/issues/2022/0400/p388.html",rationale:"The combination of Azithromycin and Ceftriaxone covers both pathogens effectively. Azithromycin is used to treat Chlamydia and provides additional coverage against possible co-infection. Ceftriaxone is highly effective against Gonorrhea. Augmentin is not recommended for treating either Gonorrhea or Chlamydia, and Doxycycline, while effective against Chlamydia, is typically reserved for alternative treatments or in different combinations.",bookmarked:0,Domain:"Implement","Age Group":"Adult (19-26)",Subject:"Reproductive","Pharmacology?":"TRUE"},{prompt:"The nurse practitioner will treat gastroesophageal reflux disease (GERD) with proton pump inhibitors (PPI). Which supplement should the patient take?",answers:["Vitamin C","Vitamin D","Folate","Vitamin B12"],correct:3,userChoice:-1,source:"https://www.amjmedsci.com/article/S0002-9629(22)00313-5/abstract",rationale:"Long-term use of proton pump inhibitors (PPIs) for the treatment of GERD can lead to decreased absorption of Vitamin B12. This is because PPIs reduce stomach acid, which is necessary for the absorption of Vitamin B12. Therefore, patients on long-term PPI therapy may need to take a Vitamin B12 supplement to prevent deficiency. Vitamin C, Vitamin D, and Folate are not directly affected by PPI use.",bookmarked:0,Domain:"Implement","Age Group":"Older Adult and Elderly",Subject:"Gastrointestinal","Pharmacology?":"TRUE"}],X=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=r>>2,h=(3&r)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(X(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw new J;const c=r<<2|s>>4;if(i.push(c),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class J extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Z=function(e){return function(e){const t=X(e);return Y.encodeByteArray(t,!0)}(e).replace(/\./g,"")};const ee=()=>function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,te=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&function(e){try{return Y.decodeString(e,!0)}catch(e){}return null}(e[1]);return t&&JSON.parse(t)},ne=()=>{try{return ee()||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||te()}catch(e){return}},ie=e=>{const t=(e=>{var t,n;return null===(n=null===(t=ne())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},re=()=>{var e;return null===(e=ne())||void 0===e?void 0:e.config};class se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function oe(){return!function(){var e;const t=null===(e=ne())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class ae extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(le,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new ae(i,o,n)}}const le=/\{\$([^}]+)}/g;function he(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(ue(n)&&ue(s)){if(!he(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function ue(e){return null!==e&&"object"==typeof e}function de(e){return e&&e._delegate?e._delegate:e}class pe{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const me="[DEFAULT]";class fe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new se;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:me})}catch{}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=me){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=me){return this.instances.has(e)}getOptions(e=me){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===me?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var i;return n||null}normalizeInstanceIdentifier(e=me){return this.component?this.component.multipleInstances?e:me:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ye,ve;(ve=ye||(ye={}))[ve.DEBUG=0]="DEBUG",ve[ve.VERBOSE=1]="VERBOSE",ve[ve.INFO=2]="INFO",ve[ve.WARN=3]="WARN",ve[ve.ERROR=4]="ERROR",ve[ve.SILENT=5]="SILENT";const we={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},be=ye.INFO,Ae={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},Ee=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!Ae[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ke{constructor(e){this.name=e,this._logLevel=be,this._logHandler=Ee,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?we[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const Te=(e,t)=>t.some((t=>e instanceof t));let Se,Ce;const _e=new WeakMap,Ie=new WeakMap,De=new WeakMap,xe=new WeakMap,Pe=new WeakMap;let Ne={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ie.get(e);if("objectStoreNames"===t)return e.objectStoreNames||De.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Me(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Re(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Le(this),t),Me(_e.get(this))}:function(...t){return Me(e.apply(Le(this),t))}:function(t,...n){const i=e.call(Le(this),t,...n);return De.set(i,t.sort?t.sort():[t]),Me(i)}}function Oe(e){return"function"==typeof e?Re(e):(e instanceof IDBTransaction&&function(e){if(Ie.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ie.set(e,t)}(e),Te(e,Se||(Se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ne):e)}function Me(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(Me(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&_e.set(t,e)})).catch((()=>{})),Pe.set(t,e),t}(e);if(xe.has(e))return xe.get(e);const t=Oe(e);return t!==e&&(xe.set(e,t),Pe.set(t,e)),t}const Le=e=>Pe.get(e);const Fe=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],Ve=new Map;function Be(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ve.get(t))return Ve.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=je.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Fe.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return Ve.set(t,s),s}!function(e){Ne=e(Ne)}((e=>({...e,get:(t,n,i)=>Be(t,n)||e.get(t,n,i),has:(t,n)=>!!Be(t,n)||e.has(t,n)})));class Ue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const $e="@firebase/app",Ge="0.10.5",ze=new ke("@firebase/app"),He="[DEFAULT]",qe={[$e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},We=new Map,Ke=new Map,Qe=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(n){ze.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ye(e){const t=e.name;if(Qe.has(t))return ze.debug(`There were multiple attempts to register component ${t}.`),!1;Qe.set(t,e);for(const t of We.values())Xe(t,e);for(const t of Ke.values())Xe(t,e);return!0}const Je=new ce("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ze{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new pe("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Je.create("app-deleted",{appName:this._name})}}function et(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:He,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw Je.create("bad-app-name",{appName:String(r)});if(n||(n=re()),!n)throw Je.create("no-options");const s=We.get(r);if(s){if(he(n,s.options)&&he(i,s.config))return s;throw Je.create("duplicate-app",{appName:r})}const o=new ge(r);for(const e of Qe.values())o.addComponent(e);const a=new Ze(n,i,o);return We.set(r,a),a}function tt(e,t,n){var i;let r=null!==(i=qe[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ze.warn(e.join(" "))}Ye(new pe(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const nt="firebase-heartbeat-database",it=1,rt="firebase-heartbeat-store";let st=null;function ot(){return st||(st=function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=Me(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(Me(o.result),e.oldVersion,e.newVersion,Me(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(nt,it,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(rt)}catch(e){}}}).catch((e=>{throw Je.create("idb-open",{originalErrorMessage:e.message})}))),st}async function at(e,t){try{const n=(await ot()).transaction(rt,"readwrite");await n.objectStore(rt).put(t,ct(e)),await n.done}catch(e){if(e instanceof ae)ze.warn(e.message);else{const t=Je.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});ze.warn(t.message)}}}function ct(e){return`${e.name}!${e.options.appId}`}class lt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ut(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ht();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ht(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),dt(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),dt(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=Z(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ht(){return(new Date).toISOString().substring(0,10)}class ut{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch{return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ot()).transaction(rt),n=await t.objectStore(rt).get(ct(e));return await t.done,n}catch(e){if(e instanceof ae)ze.warn(e.message);else{const t=Je.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});ze.warn(t.message)}}}(this.app);return null!=e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return at(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return at(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function dt(e){return Z(JSON.stringify({version:2,heartbeats:e})).length}!function(e){Ye(new pe("platform-logger",(e=>new Ue(e)),"PRIVATE")),Ye(new pe("heartbeat",(e=>new lt(e)),"PRIVATE")),tt($e,Ge,e),tt($e,Ge,"esm2017"),tt("fire-js","")}("");tt("firebase","10.12.2","app");var pt,mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function i(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}(function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}})(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var i=t-this.blockSize,r=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=i;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(r[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<t;)if(r[s++]=e[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var r={};function s(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new i([0|e],0>e?-1:0)})):new i([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var a=s(0),c=s(1),l=s(16777216);function h(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function u(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(c)}function p(e,t){return e.add(d(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(h(t))throw Error("division by zero");if(h(e))return new f(a,a);if(u(e))return t=g(d(e),t),new f(d(t.g),d(t.h));if(u(t))return t=g(e,d(t)),new f(d(t.g),t.h);if(30<e.g.length){if(u(e)||u(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,i=t;0>=i.l(e);)n=y(n),i=y(i);var r=v(n,1),s=v(i,1);for(i=v(i,2),n=v(n,2);!h(i);){var l=s.add(i);0>=l.l(e)&&(r=r.add(n),s=l),i=v(i,1),n=v(n,1)}return t=p(e,r.j(t)),new f(r,t)}for(r=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),l=(s=o(n)).j(t);u(l)||0<l.l(e);)l=(s=o(n-=i)).j(t);h(s)&&(s=c),r=r.add(s),e=p(e,l)}return new f(r,e)}function y(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(u(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.i(n);e+=(0<=i?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(h(this))return"0";if(u(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,i="";;){var r=g(n,t).g,s=((0<(n=p(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(h(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return u(e=p(this,e))?-1:h(e)?0:1},e.abs=function(){return u(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(h(this)||h(e))return a;if(u(this))return u(e)?d(this).j(d(e)):d(d(this).j(e));if(u(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var c=this.i(r)>>>16,p=65535&this.i(r),f=e.i(s)>>>16,g=65535&e.i(s);n[2*r+2*s]+=p*g,m(n,2*r+2*s),n[2*r+2*s+1]+=c*g,m(n,2*r+2*s+1),n[2*r+2*s+1]+=p*f,m(n,2*r+2*s+1),n[2*r+2*s+2]+=c*f,m(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<t.length;s+=8){var c=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+c),n);8>c?(c=o(Math.pow(n,c)),r=r.j(c).add(o(l))):r=(r=r.j(i)).add(o(l))}return r},pt=i}).apply(typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{});var ft,gt,yt,vt,wt,bt,At,Et,kt,Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Tt&&Tt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var r=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in r))break e;r=r[o]}(i=i(s=r[e=e[e.length-1]]))!=s&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return t}))}}));var i=i||{},r=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function h(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function p(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(s(n)){const t=e.length||0,i=n.length||0;e.length=t+i;for(let r=0;r<i;r++)e[t+r]=n[r]}else e.push(n)}}function m(e){return/^[\s\xa0]*$/.test(e)}function f(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==f().indexOf("Gecko")||-1!=f().toLowerCase().indexOf("webkit")&&-1==f().indexOf("Edge")||-1!=f().indexOf("Trident")||-1!=f().indexOf("MSIE")||-1!=f().indexOf("Edge"));function v(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){r.setTimeout((()=>{throw e}),0)}function T(){var e=D;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new C),(e=>e.reset()));class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let _,I=!1,D=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=r.Promise.resolve(void 0);_=()=>{e.then(P)}};var P=()=>{for(var e;e=T();){try{e.h.call(e.g)}catch(e){k(e)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function N(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.s=!1,N.prototype.ma=function(){this.s||(this.s=!0,this.N())},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch{}return e}();function M(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}u(M,R);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),j=0;function V(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++j,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function U(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Array.prototype.indexOf.call(r,t,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function G(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==i)return r}return-1}U.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=G(e,t,i,r);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),H={};function q(e,t,n,i,r){if(i&&i.once)return K(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)q(e,t[s],n,i,r);return null}return n=te(n),e&&e[F]?e.K(t,n,o(i)?!!i.capture:!!i,r):W(e,t,n,!1,i,r)}function W(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,c=Z(e);if(c||(e[z]=c=new U(e)),(n=c.add(t,n,i,a,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)O||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(Y(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function K(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,i,r);return null}return n=te(n),e&&e[F]?e.L(t,n,o(i)?!!i.capture:!!i,r):W(e,t,n,!0,i,r)}function Q(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=G(s=e.g[t],n,i,r))&&(B(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=G(t,n,i,r)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])$(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Y(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Z(t))?($(n,e),0==n.h&&(n.src=null,t[z]=null)):B(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,i=e.ha||e.src;e.fa&&X(e),e=n.call(i,t)}return e}function Z(e){return(e=e[z])instanceof U?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"==typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){N.call(this),this.i=new U(this),this.M=this,this.F=null}function ie(e,t){var n,i=e.F;if(i)for(n=[];i;i=i.F)n.push(i);if(e=e.M,i=t.type||t,"string"==typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var r=t;A(t=new R(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=re(o,i,!0,t)&&r}if(r=re(o=t.g=e,i,!0,t)&&r,r=re(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=re(o=t.g=n[s],i,!1,t)&&r}function re(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&$(e.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}function se(e,t,n){if("function"==typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ne,N),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,i){Q(this,e,t,n,i)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)B(n[i]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ne.prototype.L=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class ae extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(e){N.call(this),this.h=e,this.g={}}u(ce,N);var le=[];function he(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}ce.prototype.N=function(){ce.aa.N.call(this),he(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=r.JSON.stringify,de=r.JSON.parse,pe=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function me(){}function fe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){R.call(this,"d")}function we(){R.call(this,"c")}u(ve,R),u(we,R);var be={},Ae=null;function Ee(){return Ae=Ae||new ne}function ke(e){R.call(this,be.La,e)}function Te(e){const t=Ee();ie(t,new ke(t))}function Se(e,t){R.call(this,be.STAT_EVENT,e),this.stat=t}function Ce(e){const t=Ee();ie(t,new Se(t,e))}function _e(e,t){R.call(this,be.Ma,e),this.size=t}function Ie(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){e()}),t)}function De(){this.g=!0}function xe(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return ue(n)}catch{return t}}(e,n)+(i?" "+i:"")}))}be.La="serverreachability",u(ke,R),be.STAT_EVENT="statevent",u(Se,R),be.Ma="timingevent",u(_e,R),De.prototype.xa=function(){this.g=!1},De.prototype.info=function(){};var Pe,Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Me(e,t,n,i){this.j=e,this.i=t,this.l=n,this.R=i||1,this.U=new ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}u(Oe,me),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Fe={},je={};function Ve(e,t,n){e.L=1,e.v=ut(ot(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),Ge(e),e.A=ot(e.v);var n=e.A,i=e.R;Array.isArray(i)||(i=[String(i)]),Mt(n.i,"t",i),e.C=0,n=e.j.J,e.h=new Le,e.g=kn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,i=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(le[0]=r.toString()),r=le);for(var s=0;s<r.length;s++){var o=q(n,r[s],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function $e(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?je:(n=Number(t.substring(n,i)),isNaN(n)?Fe:(i+=1)+n>t.length?je:(t=t.slice(i,i+n),e.C=i+n,t))}function Ge(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(l(e.ba,e),t)}function He(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||vn(e.j,e)}function We(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,he(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var i=n.Da.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yn(n),an(n)}mn(n),Ce(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(l(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch{}n.ca=void 0}}else bn(n,11)}else if((e.K||n.g==e)&&yn(n),!m(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let l=r[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=l[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(i=1.5*h,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(i.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.ya=e,ht(i.I,i.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((i=n).qa=En(i,i.J?i.ia:null,i.W),o.K){tt(i.h,o);var a=o,c=i.L;c&&(a.I=c),a.B&&(He(a),Ge(a)),i.g=o}else pn(i);0<n.i.length&&ln(n)}else"stop"!=l[0]&&"close"!=l[0]||bn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?bn(n,7):on(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Te()}catch{}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const d=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=d||7==t||Te(),He(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var i=nn(this.g);e="";var s=i.length,o=4==tn(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){We(this),qe(this);var a="";break t}this.h.i=new r.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:!(o&&t==s-1)});i.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(c)){var h=c;break t}}h=null}if(!(n=h)){this.o=!1,this.s=3,Ce(12),We(this),qe(this);break e}xe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=$e(this,a),e==je){4==d&&(this.s=4,Ce(14),n=!1),xe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Ce(15),xe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}xe(this.i,this.l,e,null),Ke(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),fn(u),u.M=!0,Ce(11))}}else xe(this.i,this.l,a,"[Invalid Chunked Response]"),We(this),qe(this)}else xe(this.i,this.l,a,null),Ke(this,a);4==d&&We(this),this.o&&!this.J&&(4==d?vn(this.j,this):(this.o=!1,Ge(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(m(e[i]))continue;var n=E(e[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),We(this),qe(this)}}}catch{}},Me.prototype.cancel=function(){this.J=!0,We(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Te(),Ce(17)),We(this),this.s=2,qe(this)):ze(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function it(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.V&&"function"==typeof e.V)return e.V();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,ct(this,e.s),this.l=e.l;var t=e.i,n=new Pt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),lt(this,n),this.m=e.m}else e&&(t=String(e).match(rt))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),ct(this,t[4]),this.l=dt(t[5]||"",!0),lt(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new Pt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function lt(e,t,n){t instanceof Pt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Rt(this,t),Mt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,Dt)),e.i=new Pt(t,e.h))}function ht(e,t,n){e.i.set(t,n)}function ut(e){return ht(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,Ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,Ct,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?It:_t,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,xt)),e.join("")};var St,Ct=/[#\/\?@]/g,_t=/[#\?:]/g,It=/[#\?]/g,Dt=/[#\?@]/g,xt=/#/g;function Pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Rt(e,t){Nt(e),t=Lt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ot(e,t){return Nt(e),t=Lt(e,t),e.g.has(t)}function Mt(e,t,n){Rt(e,t),0<n.length&&(e.i=null,e.g.set(Lt(e,t),d(n)),e.h+=n.length)}function Lt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ft(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch{}}function jt(){this.g=new pe}function Vt(e,t,n){const i=n||"";try{it(e,(function(e,n){let r=e;o(e)&&(r=ue(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function Bt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ut(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function $t(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Gt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,zt(e)}function zt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function qt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Ht(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ht(e,t,n))}function Wt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Pt.prototype).add=function(e,t){Nt(this),this.i=null,e=Lt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},e.V=function(e){Nt(this);let t=[];if("string"==typeof e)Ot(this,e)&&(t=t.concat(this.g.get(Lt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,Ot(this,e=Lt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?0<(e=this.V(e)).length?String(e[0]):t:t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")},u(Bt,me),Bt.prototype.g=function(){return new Ut(this.l,this.j)},Bt.prototype.i=(St={},function(){return St}),u(Ut,ne),(e=Ut.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,zt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,zt(this)),this.g&&(this.readyState=3,zt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof r.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$t(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Gt(this):zt(this),3==this.readyState&&$t(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Gt(this))},e.Qa=function(e){this.g&&(this.response=e,Gt(this))},e.ga=function(){this.g&&Gt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Wt,ne);var Kt=/^https?$/i,Qt=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Yt(e),Zt(e)}function Yt(e){e.A||(e.A=!0,ie(e,"complete"),ie(e,"error"))}function Jt(e){if(e.h&&typeof i<"u"&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))se(e.Ea,0,e);else if(ie(e,"readystatechange"),4==tn(e)){e.h=!1;try{const i=e.Z();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===i){var o=String(e.D).match(rt)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!Kt.test(o?o.toLowerCase():"")}n=s}if(n)ie(e,"complete"),ie(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch{a=""}e.l=a+" ["+e.Z()+"]",Yt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const n=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ie(e,"ready");try{n.onreadystatechange=i}catch{}}}function en(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new De,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new jt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(cn(e),3==e.G){var t=e.U++,n=ot(e.I);if(ht(n,"SID",e.K),ht(n,"RID",t),ht(n,"TYPE","terminate"),un(e,n),(t=new Me(e,e.j,t)).L=2,t.v=ut(ot(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch{}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=kn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ge(t)}An(e)}function an(e){e.g&&(fn(e),e.g.cancel(),e.g=null)}function cn(e){an(e),e.u&&(r.clearTimeout(e.u),e.u=null),yn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&r.clearTimeout(e.s),e.s=null)}function ln(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;_||x(),I||(_(),I=!0),D.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const i=ot(e.I);ht(i,"SID",e.K),ht(i,"RID",n),ht(i,"AID",e.T),un(e,i),e.m&&e.o&&qt(i,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=dn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,i,t)}function un(e,t){e.H&&v(e.H,(function(e,n){ht(t,n,e)})),e.l&&it({},(function(e,n){ht(t,n,e)}))}function dn(e,t,n){n=Math.min(e.i.length,n);var i=e.l?l(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),s=!1;else try{Vt(a,e,"req"+n+"_")}catch{i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,i}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;_||x(),I||(_(),I=!0),D.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(l(e.Fa,e),wn(e,e.v)),e.v++,!0)}function fn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ht(t,"RID","rpc"),ht(t,"SID",e.K),ht(t,"AID",e.T),ht(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ht(t,"TO",e.ja),ht(t,"TYPE","xmlhttp"),un(e,t),e.m&&e.o&&qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ut(ot(t)),n.m=null,n.P=!0,Be(n,e)}function yn(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function vn(e,t){var n=null;if(e.g==t){yn(e),fn(e),e.g=null;var i=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),i=1}if(0!=e.G)if(t.o)if(1==i){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;ie(i=Ee(),new _e(i,n)),ln(e)}else pn(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==i&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ie(l(e.Ga,e,t),wn(e,e.B)),e.B++,0)))}(e,t)||2==i&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:bn(e,5);break;case 4:bn(e,10);break;case 3:bn(e,6);break;default:bn(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function bn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),i=e.Xa;const t=!i;i=new st(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||at(i,"https"),ut(i),t?function(e,t){const n=new De;if(r.Image){const i=new Image;i.onload=h(Ft,n,"TestLoadImage: loaded",!0,t,i),i.onerror=h(Ft,n,"TestLoadImage: error",!1,t,i),i.onabort=h(Ft,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=h(Ft,n,"TestLoadImage: timeout",!1,t,i),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new De;const n=new AbortController,i=setTimeout((()=>{n.abort(),Ft(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(i),e.ok?Ft(0,0,!0,t):Ft(0,0,!1,t)})).catch((()=>{clearTimeout(i),Ft(0,0,!1,t)}))}(i.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),An(e),cn(e)}function An(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);(0!=t.length||0!=e.i.length)&&(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function En(e,t,n){var i=n instanceof st?ot(n):new st(n);if(""!=i.g)t&&(i.g=t+"."+i.g),ct(i,i.s);else{var s=r.location;i=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);i&&at(o,i),t&&(o.g=t),s&&ct(o,s),n&&(o.l=n),i=o}return n=e.D,t=e.ya,n&&t&&ht(i,n,t),ht(i,"VER",e.la),un(e,i),i}function kn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Wt(new Bt({eb:n})):new Wt(e.pa)).Ha(e.J),t}function Tn(){}function Sn(){}function Cn(e,t){ne.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Dn(this)}function _n(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function In(){we.call(this),this.status=1}function Dn(e){this.g=e}(e=Wt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?fe(this.o):fe(Pe),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void Xt(this,e)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Qt,t,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){Xt(this,e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ie(this,"complete"),ie(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Wt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,i){Ce(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=En(this,null,this.W),ln(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),A(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=dn(this,r,t),ht(n=ot(this.I),"RID",e),ht(n,"CVER",22),this.D&&ht(n,"X-HTTP-Session-Id",this.D),un(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ht(s)))+"&"+t:this.m&&qt(n,this.m,s)),et(this.h,r),this.Ua&&ht(n,"TYPE","init"),this.P?(ht(n,"$req",t),ht(n,"SID","null"),r.T=!0,Ve(r,n,null)):Ve(r,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||Ye(this.h)||hn(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),an(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),mn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Tn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Sn.prototype.g=function(e,t){return new Cn(e,t)},u(Cn,ne),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){on(this.g)},Cn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&ln(t)},Cn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Cn.aa.N.call(this)},u(_n,ve),u(In,we),u(Dn,Tn),Dn.prototype.ua=function(){ie(this.g,"a")},Dn.prototype.ta=function(e){ie(this.g,new _n(e))},Dn.prototype.sa=function(e){ie(this.g,new In)},Dn.prototype.ra=function(){ie(this.g,"b")},Sn.prototype.createWebChannel=Sn.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,kt=function(){return new Sn},Et=function(){return Ee()},At=be,bt={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,wt=Ne,Re.COMPLETE="complete",vt=Re,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,yt=ge,gt=Bt,Wt.prototype.listenOnce=Wt.prototype.L,Wt.prototype.getLastError=Wt.prototype.Ka,Wt.prototype.getLastErrorCode=Wt.prototype.Ba,Wt.prototype.getStatus=Wt.prototype.Z,Wt.prototype.getResponseJson=Wt.prototype.Oa,Wt.prototype.getResponseText=Wt.prototype.oa,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Ha,ft=Wt}).apply(typeof Tt<"u"?Tt:typeof self<"u"?self:typeof window<"u"?window:{});const St="@firebase/firestore";class Ct{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");let _t="10.12.1";const It=new ke("@firebase/firestore");function Dt(){return It.logLevel}function xt(e,...t){if(It.logLevel<=ye.DEBUG){const n=t.map(Rt);It.debug(`Firestore (${_t}): ${e}`,...n)}}function Pt(e,...t){if(It.logLevel<=ye.ERROR){const n=t.map(Rt);It.error(`Firestore (${_t}): ${e}`,...n)}}function Nt(e,...t){if(It.logLevel<=ye.WARN){const n=t.map(Rt);It.warn(`Firestore (${_t}): ${e}`,...n)}}function Rt(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}function Ot(e="Unexpected state"){const t=`FIRESTORE (${_t}) INTERNAL ASSERTION FAILED: `+e;throw Pt(t),new Error(t)}function Mt(e,t){e||Ot()}function Lt(e,t){return e}const Ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jt extends ae{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vt{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Bt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ut{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ct.UNAUTHENTICATED)))}shutdown(){}}class $t{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Gt{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Vt;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Vt,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Vt)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Mt("string"==typeof t.accessToken),new Bt(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new Ct(e)}}class zt{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ht{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new zt(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ct.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wt{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,xt("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Mt("string"==typeof e.token),this.R=e.token,new qt(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Qt{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=Kt(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62))}return n}}function Xt(e,t){return e<t?-1:e>t?1:0}function Yt(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class Jt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new jt(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new jt(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new jt(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new jt(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Jt(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zt(e)}static min(){return new Zt(new Jt(0,0))}static max(){return new Zt(new Jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class en{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ot(),void 0===n?n=e.length-t:n>e.length-t&&Ot(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===en.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof en?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends en{construct(e,t,n){return new tn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new jt(Ft.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new tn(t)}static emptyPath(){return new tn([])}}const nn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends en{construct(e,t,n){return new rn(e,t,n)}static isValidIdentifier(e){return nn.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rn(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new jt(Ft.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new jt(Ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new jt(Ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new jt(Ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}class sn{constructor(e){this.path=e}static fromPath(e){return new sn(tn.fromString(e))}static fromName(e){return new sn(tn.fromString(e).popFirst(5))}static empty(){return new sn(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sn(new tn(e.slice()))}}function on(e){return new an(e.readTime,e.key,-1)}class an{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new an(Zt.min(),sn.empty(),-1)}static max(){return new an(Zt.max(),sn.empty(),-1)}}function cn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=sn.comparator(e.documentKey,t.documentKey),0!==n?n:Xt(e.largestBatchId,t.largestBatchId))}const ln="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function un(e){if(e.code!==Ft.FAILED_PRECONDITION||e.message!==ln)throw e;xt("LocalStore","Unexpectedly lost primary lease")}class dn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dn(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof dn?t:dn.resolve(t)}catch(e){return dn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):dn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):dn.reject(t)}static resolve(e){return new dn(((t,n)=>{t(e)}))}static reject(e){return new dn(((t,n)=>{n(e)}))}static waitFor(e){return new dn(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=dn.resolve(!1);for(const n of e)t=t.next((e=>e?dn.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new dn(((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new dn(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}function pn(e){return"IndexedDbTransactionError"===e.name}class mn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function fn(e){return null==e}function gn(e){return 0===e&&1/e==-1/0}function yn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}mn.oe=-1;class bn{constructor(e,t){this.comparator=e,this.root=t||En.EMPTY}insert(e,t){return new bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new An(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new An(this.root,e,this.comparator,!1)}getReverseIterator(){return new An(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new An(this.root,e,this.comparator,!0)}}class An{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=n??En.RED,this.left=i??En.EMPTY,this.right=r??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new En(e??this.key,t??this.value,n??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return En.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ot();const e=this.left.check();if(e!==this.right.check())throw Ot();return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1,En.EMPTY=new class{constructor(){this.size=0}get key(){throw Ot()}get value(){throw Ot()}get color(){throw Ot()}get left(){throw Ot()}get right(){throw Ot()}copy(e,t,n,i,r){return this}insert(e,t,n){return new En(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kn{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tn(this.data.getIterator())}getIteratorFrom(e){return new Tn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new kn(this.comparator);return t.data=e,t}}class Tn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Sn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Sn([])}unionWith(e){let t=new kn(rn.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Sn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yt(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Cn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw typeof DOMException<"u"&&e instanceof DOMException?new Cn("Invalid base64 string: "+e):e}}(e);return new _n(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const In=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dn(e){if(Mt(!!e),"string"==typeof e){let t=0;const n=In.exec(e);if(Mt(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:xn(e.seconds),nanos:xn(e.nanos)}}function xn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Pn(e){return"string"==typeof e?_n.fromBase64String(e):_n.fromUint8Array(e)}function Nn(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Rn(e){const t=e.mapValue.fields.__previous_value__;return Nn(t)?Rn(t):t}function On(e){const t=Dn(e.mapValue.fields.__local_write_time__.timestampValue);return new Jt(t.seconds,t.nanos)}class Mn{constructor(e,t,n,i,r,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Ln{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ln("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ln&&e.projectId===this.projectId&&e.database===this.database}}const Fn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function jn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nn(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?9007199254740991:10:Ot()}function Vn(e,t){if(e===t)return!0;const n=jn(e);if(n!==jn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return On(e).isEqual(On(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Dn(e.timestampValue),i=Dn(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return i=t,Pn(e.bytesValue).isEqual(Pn(i.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xn(e.geoPointValue.latitude)===xn(t.geoPointValue.latitude)&&xn(e.geoPointValue.longitude)===xn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xn(e.integerValue)===xn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xn(e.doubleValue),i=xn(t.doubleValue);return n===i?gn(n)===gn(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Yt(e.arrayValue.values||[],t.arrayValue.values||[],Vn);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(yn(n)!==yn(i))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===i[e]||!Vn(n[e],i[e])))return!1;return!0}(e,t);default:return Ot()}var i}function Bn(e,t){return void 0!==(e.values||[]).find((e=>Vn(e,t)))}function Un(e,t){if(e===t)return 0;const n=jn(e),i=jn(t);if(n!==i)return Xt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xn(e.integerValue||e.doubleValue),i=xn(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return $n(e.timestampValue,t.timestampValue);case 4:return $n(On(e),On(t));case 5:return Xt(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Pn(e),i=Pn(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let e=0;e<n.length&&e<i.length;e++){const t=Xt(n[e],i[e]);if(0!==t)return t}return Xt(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Xt(xn(e.latitude),xn(t.latitude));return 0!==n?n:Xt(xn(e.longitude),xn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let e=0;e<n.length&&e<i.length;++e){const t=Un(n[e],i[e]);if(t)return t}return Xt(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Fn.mapValue&&t===Fn.mapValue)return 0;if(e===Fn.mapValue)return 1;if(t===Fn.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let e=0;e<i.length&&e<s.length;++e){const t=Xt(i[e],s[e]);if(0!==t)return t;const o=Un(n[i[e]],r[s[e]]);if(0!==o)return o}return Xt(i.length,s.length)}(e.mapValue,t.mapValue);default:throw Ot()}}function $n(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Xt(e,t);const n=Dn(e),i=Dn(t),r=Xt(n.seconds,i.seconds);return 0!==r?r:Xt(n.nanos,i.nanos)}function Gn(e){return zn(e)}function zn(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Dn(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Pn(e.bytesValue).toBase64():"referenceValue"in e?function(e){return sn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=zn(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+=`${r}:${zn(e.fields[r])}`;return n+"}"}(e.mapValue):Ot()}function Hn(e){return!!e&&"integerValue"in e}function qn(e){return!!e&&"arrayValue"in e}function Wn(e){return!!e&&"mapValue"in e}function Kn(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vn(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Kn(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Kn(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Wn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kn(t)}setAll(e){let t=rn.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=Kn(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());Wn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Wn(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){vn(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Qn(Kn(this.value))}}function Xn(e){const t=[];return vn(e.fields,((e,n)=>{const i=new rn([e]);if(Wn(n)){const e=Xn(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new Sn(t)}class Yn{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Yn(e,0,Zt.min(),Zt.min(),Zt.min(),Qn.empty(),0)}static newFoundDocument(e,t,n,i){return new Yn(e,1,t,Zt.min(),n,i,0)}static newNoDocument(e,t){return new Yn(e,2,t,Zt.min(),Zt.min(),Qn.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Zt.min(),Zt.min(),Qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jn{constructor(e,t){this.position=e,this.inclusive=t}}function Zn(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?sn.comparator(sn.fromName(o.referenceValue),n.key):Un(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ei(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vn(e.position[n],t.position[n]))return!1;return!0}class ti{constructor(e,t="asc"){this.field=e,this.dir=t}}function ni(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ii{}class ri extends ii{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ui(e,t,n):"array-contains"===t?new fi(e,n):"in"===t?new gi(e,n):"not-in"===t?new yi(e,n):"array-contains-any"===t?new vi(e,n):new ri(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new di(e,n):new pi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Un(t,this.value)):null!==t&&jn(this.value)===jn(t)&&this.matchesComparison(Un(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends ii{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new si(e,t)}matches(e){return oi(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oi(e){return"and"===e.op}function ai(e){return function(e){for(const t of e.filters)if(t instanceof si)return!1;return!0}(e)&&oi(e)}function ci(e){if(e instanceof ri)return e.field.canonicalString()+e.op.toString()+Gn(e.value);if(ai(e))return e.filters.map((e=>ci(e))).join(",");{const t=e.filters.map((e=>ci(e))).join(",");return`${e.op}(${t})`}}function li(e,t){return e instanceof ri?(n=e,(i=t)instanceof ri&&n.op===i.op&&n.field.isEqual(i.field)&&Vn(n.value,i.value)):e instanceof si?function(e,t){return t instanceof si&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&li(n,t.filters[i])),!0)}(e,t):void Ot();var n,i}function hi(e){return e instanceof ri?`${(t=e).field.canonicalString()} ${t.op} ${Gn(t.value)}`:e instanceof si?function(e){return e.op.toString()+" {"+e.getFilters().map(hi).join(" ,")+"}"}(e):"Filter";var t}class ui extends ri{constructor(e,t,n){super(e,t,n),this.key=sn.fromName(n.referenceValue)}matches(e){const t=sn.comparator(e.key,this.key);return this.matchesComparison(t)}}class di extends ri{constructor(e,t){super(e,"in",t),this.keys=mi("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pi extends ri{constructor(e,t){super(e,"not-in",t),this.keys=mi("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>sn.fromName(e.referenceValue)))}class fi extends ri{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qn(t)&&Bn(t.arrayValue,this.value)}}class gi extends ri{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bn(this.value.arrayValue,t)}}class yi extends ri{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bn(this.value.arrayValue,t)}}class vi extends ri{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qn(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Bn(this.value.arrayValue,e)))}}class wi{constructor(e,t=null,n=[],i=[],r=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ue=null}}function bi(e,t=null,n=[],i=[],r=null,s=null,o=null){return new wi(e,t,n,i,r,s,o)}function Ai(e){const t=Lt(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ci(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>{return(t=e).field.canonicalString()+t.dir;var t})).join(","),fn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Gn(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Gn(e))).join(",")),t.ue=e}return t.ue}function Ei(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ni(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!li(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ei(e.startAt,t.startAt)&&ei(e.endAt,t.endAt)}class ki{constructor(e,t=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ti(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Si(e){const t=Lt(e);if(null===t.ce){t.ce=[];const e=new Set;for(const n of t.explicitOrderBy)t.ce.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new kn(rn.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.ce.push(new ti(i,n))})),e.has(rn.keyField().canonicalString())||t.ce.push(new ti(rn.keyField(),n))}return t.ce}function Ci(e){const t=Lt(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return bi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ti(e.field,t)}));const n=e.endAt?new Jn(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Jn(e.startAt.position,e.startAt.inclusive):null;return bi(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}(t,Si(e))),t.le}function _i(e,t,n){return new ki(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ii(e,t){return Ei(Ci(e),Ci(t))&&e.limitType===t.limitType}function Di(e){return`${Ai(Ci(e))}|lt:${e.limitType}`}function xi(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>hi(e))).join(", ")}]`),fn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t})).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Gn(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Gn(e))).join(",")),`Target(${t})`}(Ci(e))}; limitType=${e.limitType})`}function Pi(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):sn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Si(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(i=t,!((n=e).startAt&&!function(e,t,n){const i=Zn(e,t,n);return e.inclusive?i<=0:i<0}(n.startAt,Si(n),i)||n.endAt&&!function(e,t,n){const i=Zn(e,t,n);return e.inclusive?i>=0:i>0}(n.endAt,Si(n),i)));var n,i}function Ni(e,t,n){const i=e.field.isKeyField()?sn.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Un(i,r):Ot()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ot()}}class Ri{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,i]of n)if(this.equalsFn(t,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],e))return void(i[n]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vn(this.inner,((t,n)=>{for(const[t,i]of n)e(t,i)}))}isEmpty(){return wn(this.inner)}size(){return this.innerSize}}const Oi=new bn(sn.comparator);function Mi(){return Oi}const Li=new bn(sn.comparator);function Fi(...e){let t=Li;for(const n of e)t=t.insert(n.key,n);return t}function ji(e){let t=Li;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Vi(){return Ui()}function Bi(){return Ui()}function Ui(){return new Ri((e=>e.toString()),((e,t)=>e.isEqual(t)))}const $i=new bn(sn.comparator),Gi=new kn(sn.comparator);function zi(...e){let t=Gi;for(const n of e)t=t.add(n);return t}const Hi=new kn(Xt);function qi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gn(t)?"-0":t}}function Wi(e){return{integerValue:""+e}}function Ki(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!gn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Wi(t):qi(e,t)}class Qi{constructor(){this._=void 0}}function Xi(e,t,n){return e instanceof Zi?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Nn(t)&&(t=Rn(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof er?tr(e,t):e instanceof nr?ir(e,t):function(e,t){const n=Ji(e,t),i=sr(n)+sr(e.Pe);return Hn(n)&&Hn(e.Pe)?Wi(i):qi(e.serializer,i)}(e,t)}function Yi(e,t,n){return e instanceof er?tr(e,t):e instanceof nr?ir(e,t):n}function Ji(e,t){return e instanceof rr?Hn(n=t)||(i=n)&&"doubleValue"in i?t:{integerValue:0}:null;var n,i}class Zi extends Qi{}class er extends Qi{constructor(e){super(),this.elements=e}}function tr(e,t){const n=or(t);for(const t of e.elements)n.some((e=>Vn(e,t)))||n.push(t);return{arrayValue:{values:n}}}class nr extends Qi{constructor(e){super(),this.elements=e}}function ir(e,t){let n=or(t);for(const t of e.elements)n=n.filter((e=>!Vn(e,t)));return{arrayValue:{values:n}}}class rr extends Qi{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function sr(e){return xn(e.integerValue||e.doubleValue)}function or(e){return qn(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ar{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class hr{}function ur(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ar(e.key,cr.none()):new gr(e.key,e.data,cr.none());{const n=e.data,i=Qn.empty();let r=new kn(rn.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new yr(e.key,i,new Sn(r.toArray()),cr.none())}}function dr(e,t,n){var i;e instanceof gr?function(e,t,n){const i=e.value.clone(),r=wr(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof yr?function(e,t,n){if(!lr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=wr(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(vr(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):(i=n,t.convertToNoDocument(i.version).setHasCommittedMutations())}function pr(e,t,n,i){return e instanceof gr?function(e,t,n,i){if(!lr(e.precondition,t))return n;const r=e.value.clone(),s=br(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof yr?function(e,t,n,i){if(!lr(e.precondition,t))return n;const r=br(e.fieldTransforms,i,t),s=t.data;return s.setAll(vr(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):(r=t,s=n,lr(e.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):s);var r,s}function mr(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=Ji(i.transform,e||null);null!=r&&(null===n&&(n=Qn.empty()),n.set(i.field,r))}return n||null}function fr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,i=t.fieldTransforms,!!(void 0===n&&void 0===i||n&&i&&Yt(n,i,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,i=t.transform,n instanceof er&&i instanceof er||n instanceof nr&&i instanceof nr?Yt(n.elements,i.elements,Vn):n instanceof rr&&i instanceof rr?Vn(n.Pe,i.Pe):n instanceof Zi&&i instanceof Zi);var n,i}(e,t)))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,i}class gr extends hr{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yr extends hr{constructor(e,t,n,i,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function vr(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function wr(e,t,n){const i=new Map;Mt(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,Yi(o,a,n[r]))}return i}function br(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,Xi(e,s,t))}return i}class Ar extends hr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Er extends hr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kr{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const i=this.mutations[t];i.key.isEqual(e.key)&&dr(i,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=pr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=pr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Bi();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=ur(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Zt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),zi())}isEqual(e){return this.batchId===e.batchId&&Yt(this.mutations,e.mutations,((e,t)=>fr(e,t)))&&Yt(this.baseMutations,e.baseMutations,((e,t)=>fr(e,t)))}}class Tr{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Mt(e.mutations.length===n.length);let i=$i;const r=e.mutations;for(let e=0;e<r.length;e++)i=i.insert(r[e].key,n[e].version);return new Tr(e,t,n,i)}}class Sr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var Cr,_r;(_r=Cr||(Cr={}))[_r.OK=0]="OK",_r[_r.CANCELLED=1]="CANCELLED",_r[_r.UNKNOWN=2]="UNKNOWN",_r[_r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_r[_r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_r[_r.NOT_FOUND=5]="NOT_FOUND",_r[_r.ALREADY_EXISTS=6]="ALREADY_EXISTS",_r[_r.PERMISSION_DENIED=7]="PERMISSION_DENIED",_r[_r.UNAUTHENTICATED=16]="UNAUTHENTICATED",_r[_r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_r[_r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_r[_r.ABORTED=10]="ABORTED",_r[_r.OUT_OF_RANGE=11]="OUT_OF_RANGE",_r[_r.UNIMPLEMENTED=12]="UNIMPLEMENTED",_r[_r.INTERNAL=13]="INTERNAL",_r[_r.UNAVAILABLE=14]="UNAVAILABLE",_r[_r.DATA_LOSS=15]="DATA_LOSS",new pt([4294967295,4294967295],0);class Ir{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dr(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function xr(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Pr(e,t){return Dr(e,t.toTimestamp())}function Nr(e){return Mt(!!e),Zt.fromTimestamp(function(e){const t=Dn(e);return new Jt(t.seconds,t.nanos)}(e))}function Rr(e,t){return Or(e,t).canonicalString()}function Or(e,t){const n=(i=e,new tn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===t?n:n.child(t)}function Mr(e,t){return Rr(e.databaseId,t.path)}function Lr(e){const t=function(e){const t=tn.fromString(e);return Mt(function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}(t)),t}(e);return 4===t.length?tn.emptyPath():function(e){return Mt(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}(t)}function Fr(e,t,n){return{name:Mr(e,t),fields:n.value.mapValue.fields}}function jr(e){let t=Lr(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Mt(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Vr(e);return t instanceof si&&ai(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>{return new ti(Br((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,fn(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Jn(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Jn(n,t)}(n.endAt)),function(e,t,n,i,r,s,o,a){return new ki(e,t,n,i,r,s,o,a)}(t,r,o,s,a,"F",c,l)}function Vr(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Br(e.unaryFilter.field);return ri.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Br(e.unaryFilter.field);return ri.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Br(e.unaryFilter.field);return ri.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Br(e.unaryFilter.field);return ri.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Ot()}}(e):void 0!==e.fieldFilter?(t=e,ri.create(Br(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ot()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return si.create(e.compositeFilter.filters.map((e=>Vr(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ot()}}(e.compositeFilter.op))}(e):Ot();var t}function Br(e){return rn.fromServerFormat(e.fieldPath)}function Ur(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}class $r{constructor(e){this.ct=e}}function Gr(e){const t=jr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?_i(t,t.limit,"L"):t}class zr{constructor(){this._n=new Hr}addToCollectionParentIndex(e,t){return this._n.add(t),dn.resolve()}getCollectionParents(e,t){return dn.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return dn.resolve()}deleteFieldIndex(e,t){return dn.resolve()}deleteAllFieldIndexes(e){return dn.resolve()}createTargetIndexes(e,t){return dn.resolve()}getDocumentsMatchingTarget(e,t){return dn.resolve(null)}getIndexType(e,t){return dn.resolve(0)}getFieldIndexes(e,t){return dn.resolve([])}getNextCollectionGroupToUpdate(e){return dn.resolve(null)}getMinOffset(e,t){return dn.resolve(an.min())}getMinOffsetFromCollectionGroup(e,t){return dn.resolve(an.min())}updateCollectionGroup(e,t,n){return dn.resolve()}updateIndexEntries(e,t){return dn.resolve()}}class Hr{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new kn(tn.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new kn(tn.comparator)).toArray()}}class qr{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new qr(0)}static Ln(){return new qr(-1)}}class Wr{constructor(){this.changes=new Ri((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?dn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Kr{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qr{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&pr(n.mutation,e,Sn.empty(),Jt.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,zi()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=zi()){const i=Vi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=Fi();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Vi();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,zi())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=Mi();const s=Ui(),o=Ui();return t.forEach(((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof yr)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),pr(o.mutation,t,o.mutation.getFieldMask(),Jt.now())):s.set(t.key,Sn.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Kr(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Ui();let i=new bn(((e,t)=>e-t)),r=zi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Sn.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||zi()).add(e);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Bi();c.forEach((e=>{if(!r.has(e)){const i=ur(t.get(e),n.get(e));null!==i&&l.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return dn.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,i){return r=t,sn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i);var r}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):dn.resolve(Vi());let o=-1,a=r;return s.next((t=>dn.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?dn.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,zi()))).next((e=>({batchId:o,changes:ji(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new sn(t)).next((e=>{let t=Fi();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=Fi();return this.indexManager.getCollectionParents(e,r).next((o=>dn.forEach(o,(o=>{const a=(c=t,l=o.child(r),new ki(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i)))).next((e=>{r.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,Yn.newInvalidDocument(i)))}));let n=Fi();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&pr(s.mutation,i,Sn.empty(),Jt.now()),Pi(t,i)&&(n=n.insert(e,i))})),n}))}}class Xr{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return dn.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(n=t).id,version:n.version,createTime:Nr(n.createTime)}),dn.resolve();var n}getNamedQuery(e,t){return dn.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(n=t).name,query:Gr(n.bundledQuery),readTime:Nr(n.readTime)}),dn.resolve();var n}}class Yr{constructor(){this.overlays=new bn(sn.comparator),this.hr=new Map}getOverlay(e,t){return dn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Vi();return dn.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.ht(e,t,i)})),dn.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),dn.resolve()}getOverlaysForCollection(e,t,n){const i=Vi(),r=t.length+1,s=new sn(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return dn.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new bn(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=Vi(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Vi(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return dn.resolve(o)}ht(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Sr(t,n));let r=this.hr.get(t);void 0===r&&(r=zi(),this.hr.set(t,r)),this.hr.set(t,r.add(n.key))}}class Jr{constructor(){this.Pr=new kn(Zr.Ir),this.Tr=new kn(Zr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Zr(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Zr(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new sn(new tn([])),n=new Zr(t,e),i=new Zr(t,e+1),r=[];return this.Tr.forEachInRange([n,i],(e=>{this.Ar(e),r.push(e.key)})),r}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new sn(new tn([])),n=new Zr(t,e),i=new Zr(t,e+1);let r=zi();return this.Tr.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new Zr(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Zr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return sn.comparator(e.key,t.key)||Xt(e.pr,t.pr)}static Er(e,t){return Xt(e.pr,t.pr)||sn.comparator(e.key,t.key)}}class es{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new kn(Zr.Ir)}checkEmpty(e){return dn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new kr(r,t,n,i);this.mutationQueue.push(s);for(const t of i)this.wr=this.wr.add(new Zr(t.key,r)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return dn.resolve(s)}lookupMutationBatch(e,t){return dn.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.br(n),r=i<0?0:i;return dn.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return dn.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return dn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Zr(t,0),i=new Zr(t,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(e=>{const t=this.Sr(e.pr);r.push(t)})),dn.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new kn(Xt);return t.forEach((e=>{const t=new Zr(e,0),i=new Zr(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,i],(e=>{n=n.add(e.pr)}))})),dn.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;sn.isDocumentKey(r)||(r=r.child(""));const s=new Zr(new sn(r),0);let o=new kn(Xt);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.pr)),!0)}),s),dn.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Mt(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return dn.forEach(t.mutations,(i=>{const r=new Zr(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Zr(t,0),i=this.wr.firstAfterOrEqual(n);return dn.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,dn.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ts{constructor(e){this.vr=e,this.docs=new bn(sn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return dn.resolve(n?n.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let n=Mi();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Yn.newInvalidDocument(e))})),dn.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=Mi();const s=t.path,o=new sn(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||cn(on(o),n)<=0||(i.has(o.key)||Pi(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return dn.resolve(r)}getAllFromCollectionGroup(e,t,n,i){Ot()}Fr(e,t){return dn.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ns(this)}getSize(e){return dn.resolve(this.size)}}class ns extends Wr{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(n)})),dn.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class is{constructor(e){this.persistence=e,this.Mr=new Ri((e=>Ai(e)),Ei),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Jr,this.targetCount=0,this.Lr=qr.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),dn.resolve()}getLastRemoteSnapshotVersion(e){return dn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dn.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),dn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),dn.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new qr(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,dn.resolve()}updateTargetData(e,t){return this.qn(t),dn.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,dn.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),dn.waitFor(r).next((()=>i))}getTargetCount(e){return dn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return dn.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),dn.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),dn.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),dn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return dn.resolve(n)}containsKey(e,t){return dn.resolve(this.Nr.containsKey(t))}}class rs{constructor(e,t){this.Br={},this.overlays={},this.kr=new mn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new is(this),this.indexManager=new zr,this.remoteDocumentCache=new ts((e=>this.referenceDelegate.Kr(e))),this.serializer=new $r(t),this.$r=new Xr(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yr,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new es(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){xt("MemoryPersistence","Starting transaction:",e);const i=new ss(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((e=>this.referenceDelegate.Wr(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Gr(e,t){return dn.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class ss extends hn{constructor(e){super(),this.currentSequenceNumber=e}}class os{constructor(e){this.persistence=e,this.zr=new Jr,this.jr=null}static Hr(e){return new os(e)}get Jr(){if(this.jr)return this.jr;throw Ot()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),dn.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),dn.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),dn.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dn.forEach(this.Jr,(n=>{const i=sn.fromPath(n);return this.Yr(e,i).next((e=>{e||t.removeEntry(i,Zt.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return dn.or([()=>dn.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class as{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=i}static Ki(e,t){let n=zi(),i=zi();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new as(e,t.fromCache,n,i)}}class cs{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ls{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=oe()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.ji(e,t).next((e=>{r.result=e})).next((()=>{if(!r.result)return this.Hi(e,t,i,n).next((e=>{r.result=e}))})).next((()=>{if(r.result)return;const n=new cs;return this.Ji(e,t,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(e,t,n,i.size)}))})).next((()=>r.result))}Yi(e,t,n,i){return n.documentReadCount<this.Wi?(Dt()<=ye.DEBUG&&xt("QueryEngine","SDK will not create cache indexes for query:",xi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),dn.resolve()):(Dt()<=ye.DEBUG&&xt("QueryEngine","Query:",xi(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Dt()<=ye.DEBUG&&xt("QueryEngine","The SDK decides to create cache indexes for query:",xi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ci(t))):dn.resolve())}ji(e,t){if(Ti(t))return dn.resolve(null);let n=Ci(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=_i(t,null,"F"),n=Ci(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=zi(...i);return this.zi.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,i);return this.Xi(t,s,r,n.readTime)?this.ji(e,_i(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,i){return Ti(t)||i.isEqual(Zt.min())?dn.resolve(null):this.zi.getDocuments(e,n).next((r=>{const s=this.Zi(t,r);return this.Xi(t,s,n,i)?dn.resolve(null):(Dt()<=ye.DEBUG&&xt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xi(t)),this.es(e,s,t,function(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Zt.fromTimestamp(1e9===i?new Jt(n+1,0):new Jt(n,i));return new an(r,sn.empty(),t)}(i,-1)).next((e=>e)))}))}Zi(e,t){let n=new kn(function(e){return(t,n)=>{let i=!1;for(const r of Si(e)){const e=Ni(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}(e));return t.forEach(((t,i)=>{Pi(e,i)&&(n=n.add(i))})),n}Xi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(e,t,n){return Dt()<=ye.DEBUG&&xt("QueryEngine","Using full collection scan to execute query:",xi(t)),this.zi.getDocumentsMatchingQuery(e,t,an.min(),n)}es(e,t,n,i){return this.zi.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class hs{constructor(e,t,n,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new bn(Xt),this.rs=new Ri((e=>Ai(e)),Ei),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qr(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}async function us(e,t){const n=Lt(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let o=zi();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function ds(e,t){const n=Lt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}class ps{constructor(){this.activeTargetIds=Hi}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ms{constructor(){this.no=new ps,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ps,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fs{io(e){}shutdown(){}}class gs{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ys=null;function vs(){return null===ys?ys=268435456+Math.round(2147483648*Math.random()):ys++,"0x"+ys.toString(16)}const ws={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bs{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const As="WebChannelConnection";class Es extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So=`projects/${n}/databases/${i}`,this.bo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get Do(){return!1}Co(e,t,n,i,r){const s=vs(),o=this.vo(e,t.toUriEncodedString());xt("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,i,r),this.Mo(e,o,a,n).then((t=>(xt("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Nt("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}xo(e,t,n,i,r,s){return this.Co(e,t,n,i,r)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_t,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=ws[e];return`${this.wo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,i){const r=vs();return new Promise(((s,o)=>{const a=new ft;a.setWithCredentials(!0),a.listenOnce(vt.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case wt.NO_ERROR:const t=a.getResponseJson();xt(As,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(t)),s(t);break;case wt.TIMEOUT:xt(As,`RPC '${e}' ${r} timed out`),o(new jt(Ft.DEADLINE_EXCEEDED,"Request time out"));break;case wt.HTTP_ERROR:const n=a.getStatus();if(xt(As,`RPC '${e}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ft).indexOf(t)>=0?t:Ft.UNKNOWN}(t.status);o(new jt(e,t.message))}else o(new jt(Ft.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new jt(Ft.UNAVAILABLE,"Connection failed."));break;default:Ot()}}finally{xt(As,`RPC '${e}' ${r} completed.`)}}));const c=JSON.stringify(i);xt(As,`RPC '${e}' ${r} sending request:`,i),a.send(t,"POST",c,n,15)}))}Oo(e,t,n){const i=vs(),r=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=kt(),o=Et(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new gt({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=r.join("");xt(As,`Creating RPC '${e}' stream ${i}: ${l}`,a);const h=s.createWebChannel(l,a);let u=!1,d=!1;const p=new bs({lo:t=>{d?xt(As,`Not sending because RPC '${e}' stream ${i} is closed:`,t):(u||(xt(As,`Opening RPC '${e}' stream ${i} transport.`),h.open(),u=!0),xt(As,`RPC '${e}' stream ${i} sending:`,t),h.send(t))},ho:()=>h.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(h,yt.EventType.OPEN,(()=>{d||(xt(As,`RPC '${e}' stream ${i} transport opened.`),p.mo())})),m(h,yt.EventType.CLOSE,(()=>{d||(d=!0,xt(As,`RPC '${e}' stream ${i} transport closed`),p.po())})),m(h,yt.EventType.ERROR,(t=>{d||(d=!0,Nt(As,`RPC '${e}' stream ${i} transport errored:`,t),p.po(new jt(Ft.UNAVAILABLE,"The operation could not be completed")))})),m(h,yt.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];Mt(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){xt(As,`RPC '${e}' stream ${i} received error:`,o);const t=o.status;let n=function(e){const t=Cr[e];if(void 0!==t)return function(e){if(void 0===e)return Pt("GRPC error has no .code"),Ft.UNKNOWN;switch(e){case Cr.OK:return Ft.OK;case Cr.CANCELLED:return Ft.CANCELLED;case Cr.UNKNOWN:return Ft.UNKNOWN;case Cr.DEADLINE_EXCEEDED:return Ft.DEADLINE_EXCEEDED;case Cr.RESOURCE_EXHAUSTED:return Ft.RESOURCE_EXHAUSTED;case Cr.INTERNAL:return Ft.INTERNAL;case Cr.UNAVAILABLE:return Ft.UNAVAILABLE;case Cr.UNAUTHENTICATED:return Ft.UNAUTHENTICATED;case Cr.INVALID_ARGUMENT:return Ft.INVALID_ARGUMENT;case Cr.NOT_FOUND:return Ft.NOT_FOUND;case Cr.ALREADY_EXISTS:return Ft.ALREADY_EXISTS;case Cr.PERMISSION_DENIED:return Ft.PERMISSION_DENIED;case Cr.FAILED_PRECONDITION:return Ft.FAILED_PRECONDITION;case Cr.ABORTED:return Ft.ABORTED;case Cr.OUT_OF_RANGE:return Ft.OUT_OF_RANGE;case Cr.UNIMPLEMENTED:return Ft.UNIMPLEMENTED;case Cr.DATA_LOSS:return Ft.DATA_LOSS;default:return Ot()}}(t)}(t),r=o.message;void 0===n&&(n=Ft.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,p.po(new jt(n,r)),h.close()}else xt(As,`RPC '${e}' stream ${i} received:`,r),p.yo(r)}})),m(o,At.STAT_EVENT,(t=>{t.stat===bt.PROXY?xt(As,`RPC '${e}' stream ${i} detected buffering proxy`):t.stat===bt.NOPROXY&&xt(As,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.fo()}),0),p}}function ks(){return typeof document<"u"?document:null}function Ts(e){return new Ir(e,!0)}class Ss{constructor(e,t,n=1e3,i=1.5,r=6e4){this.oi=e,this.timerId=t,this.No=n,this.Lo=i,this.Bo=r,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-n);i>0&&xt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Cs{constructor(e,t,n,i,r,s,o,a){this.oi=e,this.Go=n,this.zo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Ss(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Ft.RESOURCE_EXHAUSTED?(Pt(t.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Ft.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.jo===t&&this.u_(e,n)}),(t=>{e((()=>{const e=new jt(Ft.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return xt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _s extends Cs{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Mt(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Nr(e.updateTime):Nr(t);return n.isEqual(Zt.min())&&(n=Nr(t)),new ar(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Nr(e.commitTime);return this.listener.A_(n,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=function(e){return new tn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof gr)n={update:Fr(e,t.key,t.value)};else if(t instanceof Ar)n={delete:Mr(e,t.key)};else if(t instanceof yr)n={update:Fr(e,t.key,t.data),updateMask:Ur(t.fieldMask)};else{if(!(t instanceof Er))return Ot();n={verify:Mr(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Zi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof er)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rr)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ot()}(0,e)))),t.precondition.isNone||(n.currentDocument=(i=e,void 0!==(r=t.precondition).updateTime?{updateTime:Pr(i,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Ot())),n;var i,r}(this.serializer,e)))};this.i_(t)}}class Is extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new jt(Ft.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.Co(e,Or(t,n),i,r,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jt(Ft.UNKNOWN,e.toString())}))}xo(e,t,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.xo(e,Or(t,n),i,s,o,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jt(Ft.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class Ds{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Pt(t),this.y_=!1):xt("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class xs{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=r,this.O_.io((e=>{n.enqueueAndForget((async()=>{Rs(this)&&(xt("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Lt(e);t.M_.add(4),await Ns(t),t.N_.set("Unknown"),t.M_.delete(4),await Ps(t)}(this))}))})),this.N_=new Ds(n,i)}}async function Ps(e){if(Rs(e))for(const t of e.x_)await t(!0)}async function Ns(e){for(const t of e.x_)await t(!1)}function Rs(e){return 0===Lt(e).M_.size}async function Os(e,t,n){if(!pn(t))throw t;e.M_.add(1),await Ns(e),e.N_.set("Offline"),n||(n=()=>function(e){const t=Lt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{xt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Ps(e)}))}function Ms(e,t){return t().catch((n=>Os(e,n,t)))}async function Ls(e){const t=Lt(e),n=qs(t);let i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Fs(t);)try{const e=await ds(t.localStore,i);if(null===e){0===t.v_.length&&n.n_();break}i=e.batchId,js(t,e)}catch(e){await Os(t,e)}Vs(t)&&Bs(t)}function Fs(e){return Rs(e)&&e.v_.length<10}function js(e,t){e.v_.push(t);const n=qs(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Vs(e){return Rs(e)&&!qs(e).Zo()&&e.v_.length>0}function Bs(e){qs(e).start()}async function Us(e){qs(e).V_()}async function $s(e){const t=qs(e);for(const n of e.v_)t.d_(n.mutations)}async function Gs(e,t,n){const i=e.v_.shift(),r=Tr.from(i,t,n);await Ms(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Ls(e)}async function zs(e,t){t&&qs(e).E_&&await async function(e,t){if(function(e){switch(e){default:return Ot();case Ft.CANCELLED:case Ft.UNKNOWN:case Ft.DEADLINE_EXCEEDED:case Ft.RESOURCE_EXHAUSTED:case Ft.INTERNAL:case Ft.UNAVAILABLE:case Ft.UNAUTHENTICATED:return!1;case Ft.INVALID_ARGUMENT:case Ft.NOT_FOUND:case Ft.ALREADY_EXISTS:case Ft.PERMISSION_DENIED:case Ft.FAILED_PRECONDITION:case Ft.ABORTED:case Ft.OUT_OF_RANGE:case Ft.UNIMPLEMENTED:case Ft.DATA_LOSS:return!0}}(n=t.code)&&n!==Ft.ABORTED){const n=e.v_.shift();qs(e).t_(),await Ms(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Ls(e)}var n}(e,t),Vs(e)&&Bs(e)}async function Hs(e,t){const n=Lt(e);n.asyncQueue.verifyOperationInProgress(),xt("RemoteStore","RemoteStore received new credentials");const i=Rs(n);n.M_.add(3),await Ns(n),i&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Ps(n)}function qs(e){return e.k_||(e.k_=function(e,t,n){const i=Lt(e);return i.f_(),new _s(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Us.bind(null,e),Ao:zs.bind(null,e),R_:$s.bind(null,e),A_:Gs.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await Ls(e)):(await e.k_.stop(),e.v_.length>0&&(xt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))}))),e.k_}class Ws{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new Ws(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jt(Ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ks(e,t){if(Pt("AsyncQueue",`${t}: ${e}`),pn(e))return new jt(Ft.UNAVAILABLE,`${t}: ${e}`);throw e}class Qs{constructor(){this.queries=new Ri((e=>Di(e)),Ii),this.onlineState="Unknown",this.z_=new Set}}var Xs,Ys;(Ys=Xs||(Xs={})).J_="default",Ys.Cache="cache";class Js{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Ri((e=>Di(e)),Ii),this.Da=new Map,this.Ca=new Set,this.va=new bn(sn.comparator),this.Fa=new Map,this.Ma=new Jr,this.xa={},this.Oa=new Map,this.Na=qr.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Zs(e,t,n){const i=function(e){const t=Lt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=to.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=no.bind(null,t),t}(e);try{const e=await function(e,t){const n=Lt(e),i=Jt.now(),r=t.reduce(((e,t)=>e.add(t.key)),zi());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Mi(),c=zi();return n.os.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{s=r;const o=[];for(const e of t){const t=mr(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new yr(e.key,t,Xn(t.value.mapValue),cr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)})).next((t=>{o=t;const i=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:ji(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.xa[e.currentUser.toKey()];i||(i=new bn(Xt)),i=i.insert(t,n),e.xa[e.currentUser.toKey()]=i}(i,e.batchId,n),await so(i,e.changes),await Ls(i.remoteStore)}catch(e){const t=Ks(e,"Failed to persist write");n.reject(t)}}function eo(e,t,n){const i=Lt(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.ba.forEach(((n,i)=>{const r=i.view.j_(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=Lt(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const e of n.U_)e.j_(t)&&(i=!0)})),i&&function(e){e.z_.forEach((e=>{e.next()}))}(n)}(i.eventManager,t),e.length&&i.Sa.h_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function to(e,t){const n=Lt(e),i=t.batch.batchId;try{const e=await function(e,t){const n=Lt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=dn.resolve();return s.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Mt(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=zi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);ro(n,i,null),io(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await so(n,e)}catch(e){await un(e)}}async function no(e,t,n){const i=Lt(e);try{const e=await function(e,t){const n=Lt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Mt(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);ro(i,t,n),io(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await so(i,e)}catch(e){await un(e)}}function io(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function ro(e,t,n){const i=Lt(e);let r=i.xa[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}async function so(e,t,n){const i=Lt(e),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach(((e,a)=>{o.push(i.Ba(a,t,n).then((e=>{if((e||n)&&i.isPrimaryClient){const t=e&&!e.fromCache;i.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){r.push(e);const t=as.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),i.Sa.h_(r),await async function(e,t){const n=Lt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>dn.forEach(t,(t=>dn.forEach(t.qi,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>dn.forEach(t.Qi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!pn(e))throw e;xt("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ns.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(t,r)}}}(i.localStore,s))}async function oo(e,t){const n=Lt(e);if(!n.currentUser.isEqual(t)){xt("SyncEngine","User change. New user:",t.toKey());const e=await us(n.localStore,t);n.currentUser=t,(i=n).Oa.forEach((e=>{e.forEach((e=>{e.reject(new jt(Ft.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),i.Oa.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await so(n,e.us)}var i}class ao{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ts(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,i){return new hs(e,t,n,i)}(this.persistence,new ls,e.initialUser,this.serializer)}createPersistence(e){return new rs(os.Hr,this.serializer)}createSharedClientState(e){return new ms}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class co{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>eo(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=oo.bind(null,this.syncEngine),await async function(e,t){const n=Lt(e);t?(n.M_.delete(2),await Ps(n)):t||(n.M_.add(2),await Ns(n),n.N_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Qs}createDatastore(e){const t=Ts(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new Es(i));var i;return function(e,t,n,i){return new Is(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,r=e=>eo(this.syncEngine,e,0),s=gs.D()?new gs:new fs,new xs(t,n,i,r,s);var t,n,i,r,s}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new Js(e,t,n,i,r,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Lt(e);xt("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await Ns(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class lo{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=Qt.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{xt("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(xt("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new jt(Ft.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ks(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ho(e,t){e.asyncQueue.verifyOperationInProgress(),xt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await us(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function uo(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xt("FirestoreClient","Using user provided OfflineComponentProvider");try{await ho(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ft.FAILED_PRECONDITION||e.code===Ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Nt("Error using user provided cache. Falling back to memory cache: "+n),await ho(e,new ao)}}else xt("FirestoreClient","Using default OfflineComponentProvider"),await ho(e,new ao);return e._offlineComponents}(e);xt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Hs(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Hs(t.remoteStore,n))),e._onlineComponents=t}function po(e){return async function(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xt("FirestoreClient","Using user provided OnlineComponentProvider"),await uo(e,e._uninitializedComponentsProvider._online)):(xt("FirestoreClient","Using default OnlineComponentProvider"),await uo(e,new co))),e._onlineComponents}(e).then((e=>e.syncEngine))}function mo(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const fo=new Map;function go(e,t,n){if(!n)throw new jt(Ft.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function yo(e){if(!sn.isDocumentKey(e))throw new jt(Ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function vo(e){if(sn.isDocumentKey(e))throw new jt(Ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function wo(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Ot()}function bo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new jt(Ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wo(e);throw new jt(Ft.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Ao{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new jt(Ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new jt(Ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new jt(Ft.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mo(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new jt(Ft.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new jt(Ft.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new jt(Ft.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Eo{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ao({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new jt(Ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new jt(Ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ao(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ut;switch(e.type){case"firstParty":return new Ht(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new jt(Ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fo.get(e);t&&(xt("ComponentProvider","Removing Datastore"),fo.delete(e),t.terminate())}(this),Promise.resolve()}}function ko(e,t,n,i={}){var r;const s=(e=bo(e,Eo))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Nt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Ct.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Z(JSON.stringify({alg:"none",type:"JWT"})),Z(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new jt(Ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ct(s)}e._authCredentials=new $t(new Bt(t,n))}}class To{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new To(this.firestore,e,this._query)}}class So{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new So(this.firestore,e,this._key)}}class Co extends To{constructor(e,t,n){super(e,t,function(e){return new ki(e)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new So(this.firestore,null,new sn(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function _o(e,t,...n){if(e=de(e),go("collection","path",t),e instanceof Eo){const i=tn.fromString(t,...n);return vo(i),new Co(e,null,i)}{if(!(e instanceof So||e instanceof Co))throw new jt(Ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(tn.fromString(t,...n));return vo(i),new Co(e.firestore,null,i)}}class Io{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Ss(this,"async_queue_retry"),this.hu=()=>{const e=ks();e&&xt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=ks();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=ks();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Vt;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!pn(e))throw e;xt("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;throw Pt("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=Ws.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(i),i}Pu(){this.au&&Ot()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}class Do extends Eo{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Io,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xo(this),this._firestoreClient.terminate()}}function xo(e){var t,n,i;const r=e._freezeSettings(),s=(o=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",c=e._persistenceKey,new Mn(o,a,c,(l=r).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,mo(l.experimentalLongPollingOptions),l.useFetchStreams));var o,a,c,l;e._firestoreClient=new lo(e._authCredentials,e._appCheckCredentials,e._queue,s),null!==(n=r.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(i=r.localCache)&&void 0!==i&&i._onlineComponentProvider&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class Po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Po(_n.fromBase64String(e))}catch(e){throw new jt(Ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Po(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class No{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new jt(Ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ro{constructor(e){this._methodName=e}}class Oo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new jt(Ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new jt(Ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}const Mo=/^__.*__$/;class Lo{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new yr(e,this.data,this.fieldMask,t,this.fieldTransforms):new gr(e,this.data,t,this.fieldTransforms)}}function Fo(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ot()}}class jo{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.mu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new jo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:n,yu:!1});return i.wu(e),i}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:n,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Ko(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(Fo(this.fu)&&Mo.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Vo{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ts(e)}Fu(e,t,n,i=!1){return new jo({fu:e,methodName:t,vu:n,path:rn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bo(e){const t=e._freezeSettings(),n=Ts(e._databaseId);return new Vo(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Uo(e,t,n,i,r,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,r);Ho("Data must be an object, but it was:",o,i);const a=Go(i,o);let c,l;if(s.merge)c=new Sn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=qo(t,i,n);if(!o.contains(r))throw new jt(Ft.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Qo(e,r)||e.push(r)}c=new Sn(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Lo(new Qn(a),c,l)}function $o(e,t){if(zo(e=de(e)))return Ho("Unsupported field value:",t,e),Go(e,t);if(e instanceof Ro)return function(e,t){if(!Fo(t.fu))throw t.Du(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Du(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=$o(r,t.bu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=de(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ki(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Jt.fromDate(e);return{timestampValue:Dr(t.serializer,n)}}if(e instanceof Jt){const n=new Jt(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Dr(t.serializer,n)}}if(e instanceof Oo)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Po)return{bytesValue:xr(t.serializer,e._byteString)};if(e instanceof So){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Du(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Rr(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du(`Unsupported field value: ${wo(e)}`)}(e,t)}function Go(e,t){const n={};return wn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vn(e,((e,i)=>{const r=$o(i,t.pu(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function zo(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Jt||e instanceof Oo||e instanceof Po||e instanceof So||e instanceof Ro)}function Ho(e,t,n){if(!zo(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){const i=wo(n);throw"an object"===i?t.Du(e+" a custom object"):t.Du(e+" "+i)}var i}function qo(e,t,n){if((t=de(t))instanceof No)return t._internalPath;if("string"==typeof t)return function(e,t,n){if(t.search(Wo)>=0)throw Ko(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new No(...t.split("."))._internalPath}catch{throw Ko(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}(e,t);throw Ko("Field path arguments must be of type string or ",e,!1,void 0,n)}const Wo=new RegExp("[~\\*/\\[\\]]");function Ko(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new jt(Ft.INVALID_ARGUMENT,a+e+c)}function Qo(e,t){return e.some((e=>e.isEqual(t)))}function Xo(e,t){const n=bo(e.firestore,Do),i=function(e,t,...n){if(e=de(e),1===arguments.length&&(t=Qt.newId()),go("doc","path",t),e instanceof Eo){const i=tn.fromString(t,...n);return yo(i),new So(e,null,new sn(i))}{if(!(e instanceof So||e instanceof Co))throw new jt(Ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(tn.fromString(t,...n));return yo(i),new So(e.firestore,e instanceof Co?e.converter:null,new sn(i))}}(e),r=function(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}(e.converter,t);return function(e,t){return function(e,t){const n=new Vt;return e.asyncQueue.enqueueAndForget((async()=>Zs(await po(e),t,n))),n.promise}(function(e){return e._firestoreClient||xo(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}(e),t)}(n,[Uo(Bo(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,cr.exists(!1))]).then((()=>i))}!function(e,t=!0){_t="10.12.2",Ye(new pe("firestore",((e,{instanceIdentifier:n,options:i})=>{const r=e.getProvider("app").getImmediate(),s=new Do(new Gt(e.getProvider("auth-internal")),new Wt(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new jt(Ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ln(e.options.projectId,t)}(r,n),r);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),tt(St,"4.6.3",e),tt(St,"4.6.3","esm2017")}();const Yo=function(e,t){const n="object"==typeof e?e:function(e=He){const t=We.get(e);if(!t&&e===He&&re())return et();if(!t)throw Je.create("no-app",{appName:e});return t}(),i="string"==typeof e?e:t||"(default)",r=function(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const e=ie("firestore");e&&ko(r,...e)}return r}(et({apiKey:"AIzaSyA9n2z7PWBv46uONKZ0sQRr-zAyWtNC93U",authDomain:"svelte-todo-fireship-ebe79.firebaseapp.com",projectId:"svelte-todo-fireship-ebe79",storageBucket:"svelte-todo-fireship-ebe79.appspot.com",messagingSenderId:"800590283445",appId:"1:800590283445:web:dd71c566728aa4ecfc74fc"}));function Jo(t){let n,i,r;return{c(){n=h("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M713-600 600-713l56-57 57 57 141-142 57 57-198 198ZM200-120v-640q0-33 23.5-56.5T280-840h280q-20 30-30 57.5T520-720q0 72 45.5 127T680-524q23 3 40 3t40-3v404L480-240 200-120Z"></path></svg>'},m(e,s){a(e,n,s),i||(r=m(n,"click",t[7]),i=!0)},p:e,d(e){e&&c(n),i=!1,r()}}}function Zo(t){let n,i,r;return{c(){n=h("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M200-120v-640q0-33 23.5-56.5T280-840h240v80H280v518l200-86 200 86v-278h80v400L480-240 200-120Zm80-640h240-240Zm400 160v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80Z"></path></svg>'},m(e,s){a(e,n,s),i||(r=m(n,"click",t[7]),i=!0)},p:e,d(e){e&&c(n),i=!1,r()}}}function ea(t){let n,i,r,s,l,u,f,v,b,A,E,k,T,S,C,_,I,D;function x(e,t){return e[1]?Jo:Zo}let P=x(t),N=P(t);return{c(){n=h("div"),i=h("span"),r=h("span"),s=d(":\n    "),l=h("span"),u=d(":\n    "),f=h("span"),v=p(),b=h("button"),b.textContent="Abort",A=p(),E=h("div"),k=h("span"),T=d(t[0]),S=d(" of "),C=d(t[2]),_=p(),N.c(),w(r,"--value",t[4]),w(l,"--value",t[3]),w(f,"--value",t[5]),g(i,"class","countdown font-mono"),g(b,"class","btn btn-sm w-32 justify-self-end"),g(k,"class","mr-2"),g(E,"class","flex items-center"),g(n,"class","grid grid-cols-2 gap-4 justify-between items-center bg-teal-950 text-white text-lg font-bold p-4")},m(e,c){a(e,n,c),o(n,i),o(i,r),o(i,s),o(i,l),o(i,u),o(i,f),o(n,v),o(n,b),o(n,A),o(n,E),o(E,k),o(k,T),o(k,S),o(k,C),o(E,_),N.m(E,null),I||(D=m(b,"click",t[6]),I=!0)},p(e,[t]){16&t&&w(r,"--value",e[4]),8&t&&w(l,"--value",e[3]),32&t&&w(f,"--value",e[5]),1&t&&y(T,e[0]),4&t&&y(C,e[2]),P===(P=x(e))&&N?N.p(e,t):(N.d(1),N=P(e),N&&(N.c(),N.m(E,null)))},i:e,o:e,d(e){e&&c(n),N.d(),I=!1,D()}}}function ta(e,t,n){let i,r,s,o,{QNumber:a}=t,{bookmarked:c}=t,{totalQuestions:l=0}=t;const h=C();let u=Date.now(),d=u+70*l*1e3,p=setInterval((function(){n(8,u=Date.now())}),1e3);function m(){clearInterval(p),h("abort")}return S((()=>{clearInterval(p)})),e.$$set=e=>{"QNumber"in e&&n(0,a=e.QNumber),"bookmarked"in e&&n(1,c=e.bookmarked),"totalQuestions"in e&&n(2,l=e.totalQuestions)},e.$$.update=()=>{256&e.$$.dirty&&n(9,i=Math.round((d-u)/1e3)),512&e.$$.dirty&&n(4,r=Math.floor(i/3600)),528&e.$$.dirty&&n(3,s=Math.floor((i-3600*r)/60)),536&e.$$.dirty&&n(5,o=i-3600*r-60*s),512&e.$$.dirty&&0===i&&(alert("Time's up!"),m())},[a,c,l,s,r,o,m,function(){h("bookmark",{mark:!c})},u,i]}class na extends K{constructor(e){super(),W(this,e,ta,ea,s,{QNumber:0,bookmarked:1,totalQuestions:2})}}function ia(e,t,n){const i=e.slice();return i[6]=t[n],i[8]=n,i}function ra(e){let t,n,i,r,s,l,u,p=String.fromCharCode(65+e[8])+"",f=e[6]+"";function v(){return e[4](e[8])}return{c(){t=h("button"),n=d(p),i=d(". "),r=d(f),g(t,"class",s="btn "+(e[1]===e[8]?"btn-active btn-ghost":"btn-ghost")+" w-full svelte-1yxs5au")},m(e,s){a(e,t,s),o(t,n),o(t,i),o(t,r),l||(u=m(t,"click",v),l=!0)},p(n,i){e=n,1&i&&f!==(f=e[6]+"")&&y(r,f),2&i&&s!==(s="btn "+(e[1]===e[8]?"btn-active btn-ghost":"btn-ghost")+" w-full svelte-1yxs5au")&&g(t,"class",s)},d(e){e&&c(t),l=!1,u()}}}function sa(t){let n,i,r,s,u=t[0].prompt+"",m=t[0].answers,f=[];for(let e=0;e<m.length;e+=1)f[e]=ra(ia(t,m,e));return{c(){n=h("div"),i=h("p"),r=d(u),s=p();for(let e=0;e<f.length;e+=1)f[e].c();g(i,"class","text-lg my-2"),g(n,"class","container")},m(e,t){a(e,n,t),o(n,i),o(i,r),o(n,s);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(n,null)},p(e,[t]){if(1&t&&u!==(u=e[0].prompt+"")&&y(r,u),15&t){let i;for(m=e[0].answers,i=0;i<m.length;i+=1){const r=ia(e,m,i);f[i]?f[i].p(r,t):(f[i]=ra(r),f[i].c(),f[i].m(n,null))}for(;i<f.length;i+=1)f[i].d(1);f.length=m.length}},i:e,o:e,d(e){e&&c(n),l(f,e)}}}function oa(e,t,n){let i,{curQuestion:r}=t;const s=C();function o(e){n(1,i=e)}function a(e){s("chosenAnswer",e)}return e.$$set=e=>{"curQuestion"in e&&n(0,r=e.curQuestion)},e.$$.update=()=>{1&e.$$.dirty&&n(1,i=r.userChoice??-1)},[r,i,o,a,e=>{a(e),o(e)}]}class aa extends K{constructor(e){super(),W(this,e,oa,sa,s,{curQuestion:0})}}function ca(t){let n,r,s,l,u,d,f,y;return{c(){n=h("div"),r=p(),s=h("nav"),l=h("button"),l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z"></path></svg>\n    Prev',u=p(),d=h("button"),d.innerHTML='Next\n    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811V8.69ZM12.75 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061a1.125 1.125 0 0 1-1.683-.977V8.69Z"></path></svg>',g(n,"class","divider"),g(l,"class","btn btn-lg mx-1"),g(d,"class","btn btn-lg mx-1"),g(s,"class","navbar bg-base-500 flex flex-row justify-center")},m(e,i){a(e,n,i),a(e,r,i),a(e,s,i),o(s,l),o(s,u),o(s,d),f||(y=[m(l,"click",t[1]),m(d,"click",t[0])],f=!0)},p:e,i:e,o:e,d(e){e&&c(n),e&&c(r),e&&c(s),f=!1,i(y)}}}function la(e){const t=C();return[function(){t("nextQuestion",{})},function(){t("prevQuestion",{})}]}class ha extends K{constructor(e){super(),W(this,e,la,ca,s,{})}}function ua(e,t,n){const i=e.slice();return i[2]=t[n],i}function da(e){let t,n,i,r,s=e[2].bookmarked&&ma();return{c(){t=h("div"),n=h("span"),n.textContent="Incorrect",i=p(),r=h("span"),s&&s.c(),g(t,"class","flex flex-row text-lg text-red-500 font-bold")},m(e,c){a(e,t,c),o(t,n),o(t,i),o(t,r),s&&s.m(r,null)},p(e,t){e[2].bookmarked?s||(s=ma(),s.c(),s.m(r,null)):s&&(s.d(1),s=null)},d(e){e&&c(t),s&&s.d()}}}function pa(e){let t,n,i,r,s=e[2].bookmarked&&fa();return{c(){t=h("div"),n=h("span"),n.textContent="Correct",i=p(),r=h("span"),s&&s.c(),g(t,"class","flex flex-row text-lg text-green-500 font-bold")},m(e,c){a(e,t,c),o(t,n),o(t,i),o(t,r),s&&s.m(r,null)},p(e,t){e[2].bookmarked?s||(s=fa(),s.c(),s.m(r,null)):s&&(s.d(1),s=null)},d(e){e&&c(t),s&&s.d()}}}function ma(e){let t,n,i;return{c(){t=u("svg"),n=u("path"),i=u("path"),g(n,"d","M200-120v-640q0-33 23.5-56.5T280-840h400q33 0 56.5 23.5T760-760v640L480-240 200-120Zm80-122 200-86 200 86v-518H280v518Zm0-518h400-400Z"),g(n,"fill","#F19E39"),g(i,"d","M280-760v518l200-86 200 86v-518H280Z"),g(i,"fill","#F19E39"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"height","24px"),g(t,"viewBox","0 -960 960 960"),g(t,"width","24px")},m(e,r){a(e,t,r),o(t,n),o(t,i)},d(e){e&&c(t)}}}function fa(e){let t,n,i;return{c(){t=u("svg"),n=u("path"),i=u("path"),g(n,"d","M200-120v-640q0-33 23.5-56.5T280-840h400q33 0 56.5 23.5T760-760v640L480-240 200-120Zm80-122 200-86 200 86v-518H280v518Zm0-518h400-400Z"),g(n,"fill","#F19E39"),g(i,"d","M280-760v518l200-86 200 86v-518H280Z"),g(i,"fill","#F19E39"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"height","24px"),g(t,"viewBox","0 -960 960 960"),g(t,"width","24px")},m(e,r){a(e,t,r),o(t,n),o(t,i)},d(e){e&&c(t)}}}function ga(e){let t,n,i,r,s,l,u,m,f,v,w,b,E,k,T,S,C,_,I,D,x,P,N,R=e[2].prompt+"",O=e[2].answers[e[2].correct]+"",M=e[2].answers[e[2].userChoice]+"",L=e[2].rationale+"";function F(e,t){return e[2].correct===e[2].userChoice?pa:da}let j=F(e),V=j(e);return{c(){V.c(),t=p(),n=h("p"),i=d(R),r=p(),s=h("p"),l=h("em"),u=d("Correct Answer: "),m=d(O),f=h("br"),v=d("\n          Your Answer: "),w=d(M),b=p(),E=h("div"),k=h("b"),k.textContent="Rationale:",T=h("br"),S=new A(!1),C=p(),_=h("p"),I=h("a"),D=d("Learn more"),P=p(),N=h("div"),S.a=null,g(I,"class","link"),g(I,"href",x=e[2].source),g(I,"target","_blank"),g(I,"rel","noopener noreferrer"),g(N,"class","divider divider-info")},m(e,c){V.m(e,c),a(e,t,c),a(e,n,c),o(n,i),a(e,r,c),a(e,s,c),o(s,l),o(l,u),o(l,m),o(l,f),o(l,v),o(l,w),a(e,b,c),a(e,E,c),o(E,k),o(E,T),S.m(L,E),a(e,C,c),a(e,_,c),o(_,I),o(I,D),a(e,P,c),a(e,N,c)},p(e,n){j===(j=F(e))&&V?V.p(e,n):(V.d(1),V=j(e),V&&(V.c(),V.m(t.parentNode,t))),1&n&&R!==(R=e[2].prompt+"")&&y(i,R),1&n&&O!==(O=e[2].answers[e[2].correct]+"")&&y(m,O),1&n&&M!==(M=e[2].answers[e[2].userChoice]+"")&&y(w,M),1&n&&L!==(L=e[2].rationale+"")&&S.p(L),1&n&&x!==(x=e[2].source)&&g(I,"href",x)},d(e){V.d(e),e&&c(t),e&&c(n),e&&c(r),e&&c(s),e&&c(b),e&&c(E),e&&c(C),e&&c(_),e&&c(P),e&&c(N)}}}function ya(t){let n,i,r,s,u,f,v,w,b,A,E,k,T,S,C=t[0].length+"",_=t[0],I=[];for(let e=0;e<_.length;e+=1)I[e]=ga(ua(t,_,e));return{c(){n=h("button"),n.textContent="Print Results",i=p(),r=h("article"),s=h("div"),u=h("h3"),f=d("Your Score is "),v=d(t[1]),w=d(" out of "),b=d(C),A=p(),E=h("hr"),k=p();for(let e=0;e<I.length;e+=1)I[e].c();g(n,"class","btn"),g(s,"class","container"),g(r,"class","prose"),g(r,"id","printArea")},m(e,t){a(e,n,t),a(e,i,t),a(e,r,t),o(r,s),o(s,u),o(u,f),o(u,v),o(u,w),o(u,b),o(s,A),o(s,E),o(s,k);for(let e=0;e<I.length;e+=1)I[e]&&I[e].m(s,null);T||(S=m(n,"click",va),T=!0)},p(e,[t]){if(2&t&&y(v,e[1]),1&t&&C!==(C=e[0].length+"")&&y(b,C),1&t){let n;for(_=e[0],n=0;n<_.length;n+=1){const i=ua(e,_,n);I[n]?I[n].p(i,t):(I[n]=ga(i),I[n].c(),I[n].m(s,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=_.length}},i:e,o:e,d(e){e&&c(n),e&&c(i),e&&c(r),l(I,e),T=!1,S()}}}function va(){const e=document.getElementById("printArea").innerHTML,t=window.open("","_blank","width=800,height=600");t.document.write(`\n        <html>\n            <head>\n                <title>Print Results</title>\n            </head>\n            <body>\n                ${e}\n            </body>\n        </html>\n    `),t.document.close(),t.focus(),t.print(),t.close()}function wa(e,t,n){let{selectedQs:i=[{id:"001",prompt:"This is sample question 1. Just for testing the results page.",answers:["First answer","second one","third answer","fourth choice"],correct:3,userChoice:2,source:"https://www.thecohenreview.com",Domain:"Diagnose","Age Group":"Child (6-12)","ANCC Body System":"Musculoskeletal","Pharmacology?":"FALSE"},{id:"002",prompt:"This is sample question 2. Just for testing the results page.",answers:["First answer","second one","third answer","fourth choice"],correct:0,userChoice:0,source:"https://www.thecohenreview.com",Domain:"Diagnose","Age Group":"Child (6-12)","ANCC Body System":"Musculoskeletal","Pharmacology?":"FALSE"}]}=t,r=0;return i.forEach((e=>{e.correct===e.userChoice&&n(1,r++,r)})),e.$$set=e=>{"selectedQs"in e&&n(0,i=e.selectedQs)},[i,r]}class ba extends K{constructor(e){super(),W(this,e,wa,ya,s,{selectedQs:0})}}function Aa(e){let t,n,r,s,l,u,d,y,w,A,E,k,T,S,C,_,I,D,x;return{c(){t=h("form"),n=h("div"),r=h("label"),r.textContent="Question Number:",s=p(),l=h("input"),u=p(),d=h("div"),y=h("label"),y.textContent="[optional] Email:",w=p(),A=h("input"),E=p(),k=h("div"),T=h("textarea"),S=p(),C=h("button"),C.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"></path></svg>\n        Submit Feedback',_=p(),I=h("div"),g(r,"class",""),g(r,"for","qNumber"),g(l,"class","input input-bordered mb-2"),g(l,"type","text"),g(l,"id","qNumber"),g(y,"class",""),g(y,"for","email"),g(A,"class","input input-bordered mb-4"),g(A,"type","email"),g(A,"id","email"),g(T,"class","textarea textarea-bordered mb-2"),g(T,"id","message"),g(T,"placeholder","Type your feedback here. Thank you."),T.required=!0,g(C,"class","btn btn-sm"),g(I,"class","loading loading-spinner loading-lg"),b(I,"hidden",e[4]),g(t,"class","border p-4 m-4")},m(i,c){a(i,t,c),o(t,n),o(n,r),o(n,s),o(n,l),v(l,e[0]),o(t,u),o(t,d),o(d,y),o(d,w),o(d,A),v(A,e[1]),o(t,E),o(t,k),o(k,T),v(T,e[2]),o(t,S),o(t,C),o(t,_),o(t,I),D||(x=[m(l,"input",e[8]),m(A,"input",e[9]),m(T,"input",e[10]),m(C,"click",e[6]),m(t,"submit",f(e[7]))],D=!0)},p(e,t){1&t&&l.value!==e[0]&&v(l,e[0]),2&t&&A.value!==e[1]&&v(A,e[1]),4&t&&v(T,e[2]),16&t&&b(I,"hidden",e[4])},d(e){e&&c(t),D=!1,i(x)}}}function Ea(t){let n,i,r,s,l,u,d,f,y,v,w=t[3]&&Aa(t);return{c(){n=h("div"),i=p(),r=h("div"),s=h("p"),s.innerHTML="This Question Bank is in testing mode and we&#39;d love to hear your feedback.<br/>Please send us your comments and report any bugs.",l=p(),u=h("div"),d=h("button"),d.textContent="Click here to send us feedback.",f=p(),w&&w.c(),g(n,"class","divider"),g(s,"class","text-sm"),g(d,"class","btn btn-neutral"),g(r,"class","container")},m(e,c){a(e,n,c),a(e,i,c),a(e,r,c),o(r,s),o(r,l),o(r,u),o(u,d),o(r,f),w&&w.m(r,null),y||(v=m(d,"click",t[5]),y=!0)},p(e,[t]){e[3]?w?w.p(e,t):(w=Aa(e),w.c(),w.m(r,null)):w&&(w.d(1),w=null)},i:e,o:e,d(e){e&&c(n),e&&c(i),e&&c(r),w&&w.d(),y=!1,v()}}}function ka(e,t,n){let{qNumber:i=0}=t,r="",s="",o=!1,a=!0;return e.$$set=e=>{"qNumber"in e&&n(0,i=e.qNumber)},[i,r,s,o,a,()=>{n(3,o=!o)},async function(){n(4,a=!1);const e={email:r,qNumber:i,message:s};try{await Xo(_o(Yo,"feedback"),e);alert("Thank you for your feedback.")}catch(e){alert(`${e}... Please email this message to support@thecohenreview.com`)}n(4,a=!0),n(3,o=!1)},function(t){_.call(this,e,t)},function(){i=this.value,n(0,i)},function(){r=this.value,n(1,r)},function(){s=this.value,n(2,s)}]}class Ta extends K{constructor(e){super(),W(this,e,ka,Ea,s,{qNumber:0})}}function Sa(e,t,n){const i=e.slice();return i[18]=t[n],i[20]=n,i}function Ca(e,t,n){const i=e.slice();return i[21]=t[n],i}function _a(t){let n,i,r,s,l,m,f;return{c(){n=h("div"),i=u("svg"),r=u("path"),s=p(),l=h("span"),m=d("ERROR: "),f=d(t[2]),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(r,"stroke-width","2"),g(r,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),g(i,"xmlns","http://www.w3.org/2000/svg"),g(i,"class","h-6 w-6 shrink-0 stroke-current"),g(i,"fill","none"),g(i,"viewBox","0 0 24 24"),g(n,"role","alert"),g(n,"class","alert alert-error")},m(e,t){a(e,n,t),o(n,i),o(i,r),o(n,s),o(n,l),o(l,m),o(l,f)},p(e,t){4&t&&y(f,e[2])},i:e,o:e,d(e){e&&c(n)}}}function Ia(e){let t,n;return t=new ba({props:{selectedQs:e[4]}}),{c(){G(t.$$.fragment)},m(e,i){z(t,e,i),n=!0},p(e,n){const i={};16&n&&(i.selectedQs=e[4]),t.$set(i)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){H(t,e)}}}function Da(e){let t,n,i,r,s,o;return t=new na({props:{QNumber:e[3]+1,bookmarked:e[4][e[3]].bookmarked,totalQuestions:e[1]}}),t.$on("abort",e[9]),t.$on("bookmark",e[13]),i=new aa({props:{curQuestion:e[4][e[3]]}}),i.$on("chosenAnswer",e[12]),s=new ha({}),s.$on("nextQuestion",e[7]),s.$on("prevQuestion",e[8]),{c(){G(t.$$.fragment),n=p(),G(i.$$.fragment),r=p(),G(s.$$.fragment)},m(e,c){z(t,e,c),a(e,n,c),z(i,e,c),a(e,r,c),z(s,e,c),o=!0},p(e,n){const r={};8&n&&(r.QNumber=e[3]+1),24&n&&(r.bookmarked=e[4][e[3]].bookmarked),2&n&&(r.totalQuestions=e[1]),t.$set(r);const s={};24&n&&(s.curQuestion=e[4][e[3]]),i.$set(s)},i(e){o||(U(t.$$.fragment,e),U(i.$$.fragment,e),U(s.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),$(i.$$.fragment,e),$(s.$$.fragment,e),o=!1},d(e){H(t,e),e&&c(n),H(i,e),e&&c(r),H(s,e)}}}function xa(t){let n,r,s,u,d,f,y,v,w,A,E,k,T,S,C=t[5],_=[];for(let e=0;e<C.length;e+=1)_[e]=Pa(Ca(t,C,e));let I=Array(t[0]),D=[];for(let e=0;e<I.length;e+=1)D[e]=Na(Sa(t,I,e));return{c(){n=h("div"),n.innerHTML='<h1 class="text-center">Welcome to our Question Bank!</h1> \n      <h3>Here&#39;s a list of features to expect:</h3> \n      <ul><li>Choose a topic to focus, or take the general FNP simulation which includes everything.</li> \n        <li>Choose the number of questions, keeping in mind that you are alloted 70 seconds per questions.</li> \n        <li>You can bookmark questions.</li> \n        <li>You will see your results at the end of the quiz and have an option to print them before losing the data.</li> \n        <li>READ THE INSTRUCTIONS 👇</li></ul>',r=p(),s=h("div"),s.innerHTML='<div class="text-xl"><strong>Instructions</strong></div> \n      <ol><li><p><strong>Select Quiz Type:</strong> Choose the quiz category that best suits your study needs.</p></li> \n        <li><p><strong>Start the Quiz:</strong> Begin answering the questions. You&#39;ll have 70secs per question, simulating real exam conditions, try to complete each question with time to spare.</p></li> \n        <li><p><strong>Complete the Quiz:</strong> Aim to answer all the questions with plenty of time to spare. You may click the ABORT button at any time. Your results and rationales will be displayed, and you&#39;ll have the option to print them before your data is reset.</p></li> \n        <li><p><strong>Restart the Quiz:</strong> Refresh the page to clear your answers and start over from the beginning.</p></li></ol> \n        <em>Please leave us your feedback. Good luck!</em>',u=p(),d=h("select"),f=h("option"),f.textContent="Choose a quiz option";for(let e=0;e<_.length;e+=1)_[e].c();y=p(),v=h("select"),w=h("option"),w.textContent="How many questions?";for(let e=0;e<D.length;e+=1)D[e].c();A=p(),E=h("div"),k=h("button"),k.textContent="START",g(s,"class","border bg-gray-200 font-mono rounded-md p-2 m-2"),f.disabled=!0,f.selected=!0,f.__value="Choose a quiz option",f.value=f.__value,g(d,"class","select select-bordered m-2"),w.disabled=!0,w.selected=!0,w.__value="How many questions?",w.value=w.__value,g(v,"class","select select-bordered m-2"),b(v,"hidden",0===t[0]),g(k,"class","btn btn-accent"),g(E,"class","m-2")},m(e,i){a(e,n,i),a(e,r,i),a(e,s,i),a(e,u,i),a(e,d,i),o(d,f);for(let e=0;e<_.length;e+=1)_[e]&&_[e].m(d,null);a(e,y,i),a(e,v,i),o(v,w);for(let e=0;e<D.length;e+=1)D[e]&&D[e].m(v,null);a(e,A,i),a(e,E,i),o(E,k),T||(S=[m(d,"change",t[10]),m(v,"change",t[11]),m(k,"click",t[6])],T=!0)},p(e,t){if(32&t){let n;for(C=e[5],n=0;n<C.length;n+=1){const i=Ca(e,C,n);_[n]?_[n].p(i,t):(_[n]=Pa(i),_[n].c(),_[n].m(d,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=C.length}if(1&t){let n;for(I=Array(e[0]),n=0;n<I.length;n+=1){const i=Sa(e,I,n);D[n]?D[n].p(i,t):(D[n]=Na(i),D[n].c(),D[n].m(v,null))}for(;n<D.length;n+=1)D[n].d(1);D.length=I.length}1&t&&b(v,"hidden",0===e[0])},i:e,o:e,d(e){e&&c(n),e&&c(r),e&&c(s),e&&c(u),e&&c(d),l(_,e),e&&c(y),e&&c(v),l(D,e),e&&c(A),e&&c(E),T=!1,i(S)}}}function Pa(t){let n,i,r=t[21]+"";return{c(){n=h("option"),i=d(r),n.__value=t[21],n.value=n.__value},m(e,t){a(e,n,t),o(n,i)},p:e,d(e){e&&c(n)}}}function Na(t){let n,i,r=t[20]+1+"";return{c(){n=h("option"),i=d(r),n.__value=t[20]+1,n.value=n.__value},m(e,t){a(e,n,t),o(n,i)},p:e,d(e){e&&c(n)}}}function Ra(e){let t,n,r,s,l,u;const d=[xa,Da,Ia,_a],m=[];function f(e,t){return"initial"===e[2]?0:"running"===e[2]?1:"results"===e[2]?2:3}return n=f(e),r=m[n]=d[n](e),l=new Ta({props:{qNumber:e[3]+1}}),{c(){t=h("article"),r.c(),s=p(),G(l.$$.fragment),g(t,"class","prose")},m(e,i){a(e,t,i),m[n].m(t,null),o(t,s),z(l,t,null),u=!0},p(e,[o]){let a=n;n=f(e),n===a?m[n].p(e,o):(B={r:0,c:[],p:B},$(m[a],1,1,(()=>{m[a]=null})),B.r||i(B.c),B=B.p,r=m[n],r?r.p(e,o):(r=m[n]=d[n](e),r.c()),U(r,1),r.m(t,s));const c={};8&o&&(c.qNumber=e[3]+1),l.$set(c)},i(e){u||(U(r),U(l.$$.fragment,e),u=!0)},o(e){$(r),$(l.$$.fragment,e),u=!1},d(e){e&&c(t),m[n].d(),H(l)}}}function Oa(e,t,n){let i,r,s,o,a=0,c=0,l="",h=localStorage.getItem("qbankUserId");function u(){n(2,i="results"),d("quiz-ended")}async function d(e){e=e||"blank";const t=Math.floor((new Date-o)/1e3);try{let n={event:e,userID:h,appState:i,userQuestionsLegth:c,selectedSubject:l,timeSpent:t};await Xo(_o(Yo,"QbankUserData"),n)}catch(e){}}return function(e){T().$$.on_mount.push(e)}((()=>{o=new Date,null===h&&(h=function(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}(),localStorage.setItem("qbankUserId",h)),d("page-mounted")})),S((()=>{d("page-destroyed")})),n(2,i="initial"),n(3,r=0),n(4,s=[]),[a,c,i,r,s,["1. FNP","2. Pharmacology","3. Gerontology"],function(){n(3,r=0),0===a||0===c?n(2,i="Please make a valid selection before starting. Refresh the page to retry."):(n(4,s=s.slice(0,c)),n(2,i="running")),d("quiz-started")},function(){r<c-1?n(3,r+=1):u()},function(){r>0&&n(3,r-=1)},u,function(e){switch(l=e.target.value,l){case"1. FNP":default:n(4,s=Q);break;case"2. Pharmacology":n(4,s=Q.filter((e=>"TRUE"===e["Pharmacology?"])));break;case"3. Gerontology":n(4,s=Q.filter((e=>"Elderly (65+)"===e["Age Group"]||"Older Adult and Elderly"===e["Age Group"])))}n(4,s=function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}(s)),n(0,a=s.length),d("subject-chosen")},function(e){n(1,c=e.target.value)},function(e){n(4,s[r].userChoice=e.detail,s)},function(e){n(4,s[r].bookmarked=e.detail.mark,s)}]}new class extends K{constructor(e){super(),W(this,e,Oa,Ra,s,{})}}({target:document.getElementById("app")});
